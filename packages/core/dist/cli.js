var core$1=require("@macro-plugin/core"),require$$0$1=require("fs"),require$$0=require("module"),path$6=require("path"),process$2=require("process"),core=require("@swc/core"),require$$0$2=require("events"),require$$1=require("child_process"),readline=require("readline"),require$$2$1=require("util"),require$$2=require("os");function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var libExports={},lib={get exports(){return libExports},set exports(t){libExports=t}};!function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.addHook=function(t,e={}){let n=!1;const s=[],c=[];let u;const l=o._extensions[".js"],p=e.matcher||null,h=!1!==e.ignoreNodeModules;u=e.extensions||e.exts||e.extension||e.ext||[".js"],Array.isArray(u)||(u=[u]);return u.forEach((e=>{if("string"!=typeof e)throw new TypeError(`Invalid Extension: ${e}`);const m=o._extensions[e]||l;c[e]=o._extensions[e],s[e]=o._extensions[e]=function(e,s){let o;n||function(t,e,n,s){if("string"!=typeof t)return!1;if(-1===e.indexOf(i.default.extname(t)))return!1;const o=i.default.resolve(t);if(s&&r.test(o))return!1;if(n&&"function"==typeof n)return!!n(o);return!0}(s,u,p,h)&&(o=e._compile,e._compile=function(n){e._compile=o;const i=t(n,s);if("string"!=typeof i)throw new Error(a);return e._compile(i,s)}),m(e,s)}})),function(){n||(n=!0,u.forEach((t=>{o._extensions[t]===s[t]&&(c[t]?o._extensions[t]=c[t]:delete o._extensions[t])})))}};var n=s(require$$0),i=s(path$6);function s(t){return t&&t.__esModule?t:{default:t}}const r=/^(?:.*[\\/])?node_modules(?:[\\/].*)?$/,o=t.constructor.length>1?t.constructor:n.default,a="[Pirates] A hook returned a non-string, or nothing at all! This is a violation of intergalactic law!\n--------------------\nIf you have no idea what this means or what Pirates is, let me explain: Pirates is a module that makes is easy to implement require hooks. One of the require hooks you're using uses it. One of these require hooks didn't return anything from it's handler, so we don't know what to do. You might want to debug this."}(lib,libExports);const nodeTargetDefaults=new Map([["12","es2018"],["13","es2019"],["14","es2020"],["15","es2021"],["16","es2021"],["17","es2022"]]);function set(t,e,n){let i=t;const s=e.split("."),r=s.pop();for(const t of s)null==i[t]&&(i[t]={}),i=i[t];i[r]=n}function isModule(){try{return require("fs"),!1}catch(t){}return!0}function transformConfig(t,e=!1){return core.transformSync(t,{module:{type:e?"es6":"commonjs"},jsc:{parser:{syntax:"typescript"},target:"esnext"},swcrc:!1,configFile:!1}).code}function hookRequire(t){const e=libExports.addHook((t=>transformConfig(t,isModule())),{extensions:[".js",".ts"]}),n=require(t);return e(),n}function loadConfigFileSync(){const t=process$2.cwd(),e=path$6.join(t,"macros.config.js");if(require$$0$1.existsSync(e)){return[e,require(e)]}const n=path$6.join(t,"macros.config.ts");if(require$$0$1.existsSync(n)){const t=hookRequire(n);return[n,(null==t?void 0:t.default)||{}]}return[void 0,{}]}function writeDts(t,e){const n=()=>require$$0$1.writeFile(t,e,(()=>{}));require$$0$1.existsSync(t)?require$$0$1.readFile(t,((t,i)=>{(null==t&&e!==i.toString()||t)&&n()})):n()}const SWC_OPTION_KEYS=["test","exclude","env","jsc","module","minify","sourceMaps","inlineSourcesContent","script","cwd","caller","filename","root","rootMode","envName","configFile","swcrc","swcrcRoots","inputSourceMap","sourceFileName","sourceRoot","plugin","isModule","outputPath"];function extractSwcOptions(t){const e={};for(const[n,i]of Object.entries(t))SWC_OPTION_KEYS.includes(n)&&(e[n]=i);return e}function applySwcOptions(t){var e;const n=extractSwcOptions(t);return(null===(e=n.jsc)||void 0===e?void 0:e.target)||set(n,"jsc.target",nodeTargetDefaults.get(process$2.version.match(/v(\d+)/)[1])||"es2018"),set(n,"jsc.transform.hidden.jest",!0),n.sourceMaps||set(n,"sourceMaps","inline"),n}function applyMacroOptions(t){return t.emitDts&&!t.onEmitDts&&(t.onEmitDts=e=>writeDts(path$6.resolve(t.dtsOutputPath||"./macros.d.ts"),e)),t}function buildTransformOptionsSync(t){const[e,n]=loadConfigFileSync(),i=Object.assign(Object.assign({},t||{}),n);return[applySwcOptions(i),applyMacroOptions(i),e]}var picomatchExports={},picomatch$2={get exports(){return picomatchExports},set exports(t){picomatchExports=t}},utils$3={};const path$5=path$6,WIN_SLASH="\\\\/",WIN_NO_SLASH=`[^${WIN_SLASH}]`,DOT_LITERAL="\\.",PLUS_LITERAL="\\+",QMARK_LITERAL="\\?",SLASH_LITERAL="\\/",ONE_CHAR="(?=.)",QMARK="[^/]",END_ANCHOR=`(?:${SLASH_LITERAL}|$)`,START_ANCHOR=`(?:^|${SLASH_LITERAL})`,DOTS_SLASH=`${DOT_LITERAL}{1,2}${END_ANCHOR}`,NO_DOT=`(?!${DOT_LITERAL})`,NO_DOTS=`(?!${START_ANCHOR}${DOTS_SLASH})`,NO_DOT_SLASH=`(?!${DOT_LITERAL}{0,1}${END_ANCHOR})`,NO_DOTS_SLASH=`(?!${DOTS_SLASH})`,QMARK_NO_DOT=`[^.${SLASH_LITERAL}]`,STAR=`${QMARK}*?`,POSIX_CHARS={DOT_LITERAL:DOT_LITERAL,PLUS_LITERAL:PLUS_LITERAL,QMARK_LITERAL:QMARK_LITERAL,SLASH_LITERAL:SLASH_LITERAL,ONE_CHAR:ONE_CHAR,QMARK:QMARK,END_ANCHOR:END_ANCHOR,DOTS_SLASH:DOTS_SLASH,NO_DOT:NO_DOT,NO_DOTS:NO_DOTS,NO_DOT_SLASH:NO_DOT_SLASH,NO_DOTS_SLASH:NO_DOTS_SLASH,QMARK_NO_DOT:QMARK_NO_DOT,STAR:STAR,START_ANCHOR:START_ANCHOR},WINDOWS_CHARS={...POSIX_CHARS,SLASH_LITERAL:`[${WIN_SLASH}]`,QMARK:WIN_NO_SLASH,STAR:`${WIN_NO_SLASH}*?`,DOTS_SLASH:`${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$)`,NO_DOT:`(?!${DOT_LITERAL})`,NO_DOTS:`(?!(?:^|[${WIN_SLASH}])${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,NO_DOT_SLASH:`(?!${DOT_LITERAL}{0,1}(?:[${WIN_SLASH}]|$))`,NO_DOTS_SLASH:`(?!${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,QMARK_NO_DOT:`[^.${WIN_SLASH}]`,START_ANCHOR:`(?:^|[${WIN_SLASH}])`,END_ANCHOR:`(?:[${WIN_SLASH}]|$)`},POSIX_REGEX_SOURCE$1={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var constants$2={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:POSIX_REGEX_SOURCE$1,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:path$5.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?WINDOWS_CHARS:POSIX_CHARS};!function(t){const e=path$6,n="win32"===process.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:r,REGEX_SPECIAL_CHARS_GLOBAL:o}=constants$2;t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),t.hasRegexChars=t=>r.test(t),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=t=>t.replace(o,"\\$1"),t.toPosixSlashes=t=>t.replace(i,"/"),t.removeBackslashes=t=>t.replace(s,(t=>"\\"===t?"":t)),t.supportsLookbehinds=()=>{const t=process.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===n||"\\"===e.sep,t.escapeLast=(e,n,i)=>{const s=e.lastIndexOf(n,i);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,n,s-1):`${e.slice(0,s)}\\${e.slice(s)}`},t.removePrefix=(t,e={})=>{let n=t;return n.startsWith("./")&&(n=n.slice(2),e.prefix="./"),n},t.wrapOutput=(t,e={},n={})=>{let i=`${n.contains?"":"^"}(?:${t})${n.contains?"":"$"}`;return!0===e.negated&&(i=`(?:^(?!${i}).*$)`),i}}(utils$3);const utils$2=utils$3,{CHAR_ASTERISK:CHAR_ASTERISK,CHAR_AT:CHAR_AT,CHAR_BACKWARD_SLASH:CHAR_BACKWARD_SLASH,CHAR_COMMA:CHAR_COMMA,CHAR_DOT:CHAR_DOT,CHAR_EXCLAMATION_MARK:CHAR_EXCLAMATION_MARK,CHAR_FORWARD_SLASH:CHAR_FORWARD_SLASH,CHAR_LEFT_CURLY_BRACE:CHAR_LEFT_CURLY_BRACE,CHAR_LEFT_PARENTHESES:CHAR_LEFT_PARENTHESES,CHAR_LEFT_SQUARE_BRACKET:CHAR_LEFT_SQUARE_BRACKET,CHAR_PLUS:CHAR_PLUS,CHAR_QUESTION_MARK:CHAR_QUESTION_MARK,CHAR_RIGHT_CURLY_BRACE:CHAR_RIGHT_CURLY_BRACE,CHAR_RIGHT_PARENTHESES:CHAR_RIGHT_PARENTHESES,CHAR_RIGHT_SQUARE_BRACKET:CHAR_RIGHT_SQUARE_BRACKET}=constants$2,isPathSeparator=t=>t===CHAR_FORWARD_SLASH||t===CHAR_BACKWARD_SLASH,depth=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)},scan$1=(t,e)=>{const n=e||{},i=t.length-1,s=!0===n.parts||!0===n.scanToEnd,r=[],o=[],a=[];let c,u,l=t,p=-1,h=0,m=0,d=!1,f=!1,g=!1,_=!1,A=!1,$=!1,E=!1,C=!1,R=!1,O=!1,S=0,v={value:"",depth:0,isGlob:!1};const b=()=>p>=i,y=()=>(c=u,l.charCodeAt(++p));for(;p<i;){let t;if(u=y(),u!==CHAR_BACKWARD_SLASH){if(!0===$||u===CHAR_LEFT_CURLY_BRACE){for(S++;!0!==b()&&(u=y());)if(u!==CHAR_BACKWARD_SLASH)if(u!==CHAR_LEFT_CURLY_BRACE){if(!0!==$&&u===CHAR_DOT&&(u=y())===CHAR_DOT){if(d=v.isBrace=!0,g=v.isGlob=!0,O=!0,!0===s)continue;break}if(!0!==$&&u===CHAR_COMMA){if(d=v.isBrace=!0,g=v.isGlob=!0,O=!0,!0===s)continue;break}if(u===CHAR_RIGHT_CURLY_BRACE&&(S--,0===S)){$=!1,d=v.isBrace=!0,O=!0;break}}else S++;else E=v.backslashes=!0,y();if(!0===s)continue;break}if(u!==CHAR_FORWARD_SLASH){if(!0!==n.noext){if(!0===(u===CHAR_PLUS||u===CHAR_AT||u===CHAR_ASTERISK||u===CHAR_QUESTION_MARK||u===CHAR_EXCLAMATION_MARK)&&l.charCodeAt(p+1)===CHAR_LEFT_PARENTHESES){if(g=v.isGlob=!0,_=v.isExtglob=!0,O=!0,u===CHAR_EXCLAMATION_MARK&&p===h&&(R=!0),!0===s){for(;!0!==b()&&(u=y());)if(u!==CHAR_BACKWARD_SLASH){if(u===CHAR_RIGHT_PARENTHESES){g=v.isGlob=!0,O=!0;break}}else E=v.backslashes=!0,u=y();continue}break}}if(u===CHAR_ASTERISK){if(c===CHAR_ASTERISK&&(A=v.isGlobstar=!0),g=v.isGlob=!0,O=!0,!0===s)continue;break}if(u===CHAR_QUESTION_MARK){if(g=v.isGlob=!0,O=!0,!0===s)continue;break}if(u===CHAR_LEFT_SQUARE_BRACKET){for(;!0!==b()&&(t=y());)if(t!==CHAR_BACKWARD_SLASH){if(t===CHAR_RIGHT_SQUARE_BRACKET){f=v.isBracket=!0,g=v.isGlob=!0,O=!0;break}}else E=v.backslashes=!0,y();if(!0===s)continue;break}if(!0===n.nonegate||u!==CHAR_EXCLAMATION_MARK||p!==h){if(!0!==n.noparen&&u===CHAR_LEFT_PARENTHESES){if(g=v.isGlob=!0,!0===s){for(;!0!==b()&&(u=y());)if(u!==CHAR_LEFT_PARENTHESES){if(u===CHAR_RIGHT_PARENTHESES){O=!0;break}}else E=v.backslashes=!0,u=y();continue}break}if(!0===g){if(O=!0,!0===s)continue;break}}else C=v.negated=!0,h++}else{if(r.push(p),o.push(v),v={value:"",depth:0,isGlob:!1},!0===O)continue;if(c===CHAR_DOT&&p===h+1){h+=2;continue}m=p+1}}else E=v.backslashes=!0,u=y(),u===CHAR_LEFT_CURLY_BRACE&&($=!0)}!0===n.noext&&(_=!1,g=!1);let x=l,H="",T="";h>0&&(H=l.slice(0,h),l=l.slice(h),m-=h),x&&!0===g&&m>0?(x=l.slice(0,m),T=l.slice(m)):!0===g?(x="",T=l):x=l,x&&""!==x&&"/"!==x&&x!==l&&isPathSeparator(x.charCodeAt(x.length-1))&&(x=x.slice(0,-1)),!0===n.unescape&&(T&&(T=utils$2.removeBackslashes(T)),x&&!0===E&&(x=utils$2.removeBackslashes(x)));const w={prefix:H,input:t,start:h,base:x,glob:T,isBrace:d,isBracket:f,isGlob:g,isExtglob:_,isGlobstar:A,negated:C,negatedExtglob:R};if(!0===n.tokens&&(w.maxDepth=0,isPathSeparator(u)||o.push(v),w.tokens=o),!0===n.parts||!0===n.tokens){let e;for(let i=0;i<r.length;i++){const s=r[i],c=t.slice(e?e+1:h,s);n.tokens&&(0===i&&0!==h?(o[i].isPrefix=!0,o[i].value=H):o[i].value=c,depth(o[i]),w.maxDepth+=o[i].depth),0===i&&""===c||a.push(c),e=s}if(e&&e+1<t.length){const i=t.slice(e+1);a.push(i),n.tokens&&(o[o.length-1].value=i,depth(o[o.length-1]),w.maxDepth+=o[o.length-1].depth)}w.slashes=r,w.parts=a}return w};var scan_1=scan$1;const constants$1=constants$2,utils$1=utils$3,{MAX_LENGTH:MAX_LENGTH,POSIX_REGEX_SOURCE:POSIX_REGEX_SOURCE,REGEX_NON_SPECIAL_CHARS:REGEX_NON_SPECIAL_CHARS,REGEX_SPECIAL_CHARS_BACKREF:REGEX_SPECIAL_CHARS_BACKREF,REPLACEMENTS:REPLACEMENTS}=constants$1,expandRange=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const n=`[${t.join("-")}]`;try{new RegExp(n)}catch(e){return t.map((t=>utils$1.escapeRegex(t))).join("..")}return n},syntaxError=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,parse$1=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=REPLACEMENTS[t]||t;const n={...e},i="number"==typeof n.maxLength?Math.min(MAX_LENGTH,n.maxLength):MAX_LENGTH;let s=t.length;if(s>i)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${i}`);const r={type:"bos",value:"",output:n.prepend||""},o=[r],a=n.capture?"":"?:",c=utils$1.isWindows(e),u=constants$1.globChars(c),l=constants$1.extglobChars(u),{DOT_LITERAL:p,PLUS_LITERAL:h,SLASH_LITERAL:m,ONE_CHAR:d,DOTS_SLASH:f,NO_DOT:g,NO_DOT_SLASH:_,NO_DOTS_SLASH:A,QMARK:$,QMARK_NO_DOT:E,STAR:C,START_ANCHOR:R}=u,O=t=>`(${a}(?:(?!${R}${t.dot?f:p}).)*?)`,S=n.dot?"":g,v=n.dot?$:E;let b=!0===n.bash?O(n):C;n.capture&&(b=`(${b})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const y={input:t,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=utils$1.removePrefix(t,y),s=t.length;const x=[],H=[],T=[];let w,L=r;const N=()=>y.index===s-1,k=y.peek=(e=1)=>t[y.index+e],I=y.advance=()=>t[++y.index]||"",D=()=>t.slice(y.index+1),P=(t="",e=0)=>{y.consumed+=t,y.index+=e},F=t=>{y.output+=null!=t.output?t.output:t.value,P(t.value)},M=()=>{let t=1;for(;"!"===k()&&("("!==k(2)||"?"===k(3));)I(),y.start++,t++;return t%2!=0&&(y.negated=!0,y.start++,!0)},j=t=>{y[t]++,T.push(t)},G=t=>{y[t]--,T.pop()},U=t=>{if("globstar"===L.type){"slash"===t.type||"paren"===t.type||y.braces>0&&("comma"===t.type||"brace"===t.type)||(!0===t.extglob||x.length&&("pipe"===t.type||"paren"===t.type))||(y.output=y.output.slice(0,-L.output.length),L.type="star",L.value="*",L.output=b,y.output+=L.output)}if(x.length&&"paren"!==t.type&&(x[x.length-1].inner+=t.value),(t.value||t.output)&&F(t),L&&"text"===L.type&&"text"===t.type)return L.value+=t.value,void(L.output=(L.output||"")+t.value);t.prev=L,o.push(t),L=t},V=(t,e)=>{const i={...l[e],conditions:1,inner:""};i.prev=L,i.parens=y.parens,i.output=y.output;const s=(n.capture?"(":"")+i.open;j("parens"),U({type:t,value:e,output:y.output?"":d}),U({type:"paren",extglob:!0,value:I(),output:s}),x.push(i)},W=t=>{let i,s=t.close+(n.capture?")":"");if("negate"===t.type){let r=b;if(t.inner&&t.inner.length>1&&t.inner.includes("/")&&(r=O(n)),(r!==b||N()||/^\)+$/.test(D()))&&(s=t.close=`)$))${r}`),t.inner.includes("*")&&(i=D())&&/^\.[^\\/.]+$/.test(i)){const n=parse$1(i,{...e,fastpaths:!1}).output;s=t.close=`)${n})${r})`}"bos"===t.prev.type&&(y.negatedExtglob=!0)}U({type:"paren",extglob:!0,value:w,output:s}),G("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let i=!1,s=t.replace(REGEX_SPECIAL_CHARS_BACKREF,((t,e,n,s,r,o)=>"\\"===s?(i=!0,t):"?"===s?e?e+s+(r?$.repeat(r.length):""):0===o?v+(r?$.repeat(r.length):""):$.repeat(n.length):"."===s?p.repeat(n.length):"*"===s?e?e+s+(r?b:""):b:e?t:`\\${t}`));return!0===i&&(s=!0===n.unescape?s.replace(/\\/g,""):s.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),s===t&&!0===n.contains?(y.output=t,y):(y.output=utils$1.wrapOutput(s,y,e),y)}for(;!N();){if(w=I(),"\0"===w)continue;if("\\"===w){const t=k();if("/"===t&&!0!==n.bash)continue;if("."===t||";"===t)continue;if(!t){w+="\\",U({type:"text",value:w});continue}const e=/^\\+/.exec(D());let i=0;if(e&&e[0].length>2&&(i=e[0].length,y.index+=i,i%2!=0&&(w+="\\")),!0===n.unescape?w=I():w+=I(),0===y.brackets){U({type:"text",value:w});continue}}if(y.brackets>0&&("]"!==w||"["===L.value||"[^"===L.value)){if(!1!==n.posix&&":"===w){const t=L.value.slice(1);if(t.includes("[")&&(L.posix=!0,t.includes(":"))){const t=L.value.lastIndexOf("["),e=L.value.slice(0,t),n=L.value.slice(t+2),i=POSIX_REGEX_SOURCE[n];if(i){L.value=e+i,y.backtrack=!0,I(),r.output||1!==o.indexOf(L)||(r.output=d);continue}}}("["===w&&":"!==k()||"-"===w&&"]"===k())&&(w=`\\${w}`),"]"!==w||"["!==L.value&&"[^"!==L.value||(w=`\\${w}`),!0===n.posix&&"!"===w&&"["===L.value&&(w="^"),L.value+=w,F({value:w});continue}if(1===y.quotes&&'"'!==w){w=utils$1.escapeRegex(w),L.value+=w,F({value:w});continue}if('"'===w){y.quotes=1===y.quotes?0:1,!0===n.keepQuotes&&U({type:"text",value:w});continue}if("("===w){j("parens"),U({type:"paren",value:w});continue}if(")"===w){if(0===y.parens&&!0===n.strictBrackets)throw new SyntaxError(syntaxError("opening","("));const t=x[x.length-1];if(t&&y.parens===t.parens+1){W(x.pop());continue}U({type:"paren",value:w,output:y.parens?")":"\\)"}),G("parens");continue}if("["===w){if(!0!==n.nobracket&&D().includes("]"))j("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(syntaxError("closing","]"));w=`\\${w}`}U({type:"bracket",value:w});continue}if("]"===w){if(!0===n.nobracket||L&&"bracket"===L.type&&1===L.value.length){U({type:"text",value:w,output:`\\${w}`});continue}if(0===y.brackets){if(!0===n.strictBrackets)throw new SyntaxError(syntaxError("opening","["));U({type:"text",value:w,output:`\\${w}`});continue}G("brackets");const t=L.value.slice(1);if(!0===L.posix||"^"!==t[0]||t.includes("/")||(w=`/${w}`),L.value+=w,F({value:w}),!1===n.literalBrackets||utils$1.hasRegexChars(t))continue;const e=utils$1.escapeRegex(L.value);if(y.output=y.output.slice(0,-L.value.length),!0===n.literalBrackets){y.output+=e,L.value=e;continue}L.value=`(${a}${e}|${L.value})`,y.output+=L.value;continue}if("{"===w&&!0!==n.nobrace){j("braces");const t={type:"brace",value:w,output:"(",outputIndex:y.output.length,tokensIndex:y.tokens.length};H.push(t),U(t);continue}if("}"===w){const t=H[H.length-1];if(!0===n.nobrace||!t){U({type:"text",value:w,output:w});continue}let e=")";if(!0===t.dots){const t=o.slice(),i=[];for(let e=t.length-1;e>=0&&(o.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&i.unshift(t[e].value);e=expandRange(i,n),y.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const n=y.output.slice(0,t.outputIndex),i=y.tokens.slice(t.tokensIndex);t.value=t.output="\\{",w=e="\\}",y.output=n;for(const t of i)y.output+=t.output||t.value}U({type:"brace",value:w,output:e}),G("braces"),H.pop();continue}if("|"===w){x.length>0&&x[x.length-1].conditions++,U({type:"text",value:w});continue}if(","===w){let t=w;const e=H[H.length-1];e&&"braces"===T[T.length-1]&&(e.comma=!0,t="|"),U({type:"comma",value:w,output:t});continue}if("/"===w){if("dot"===L.type&&y.index===y.start+1){y.start=y.index+1,y.consumed="",y.output="",o.pop(),L=r;continue}U({type:"slash",value:w,output:m});continue}if("."===w){if(y.braces>0&&"dot"===L.type){"."===L.value&&(L.output=p);const t=H[H.length-1];L.type="dots",L.output+=w,L.value+=w,t.dots=!0;continue}if(y.braces+y.parens===0&&"bos"!==L.type&&"slash"!==L.type){U({type:"text",value:w,output:p});continue}U({type:"dot",value:w,output:p});continue}if("?"===w){if(!(L&&"("===L.value)&&!0!==n.noextglob&&"("===k()&&"?"!==k(2)){V("qmark",w);continue}if(L&&"paren"===L.type){const t=k();let e=w;if("<"===t&&!utils$1.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===L.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(D()))&&(e=`\\${w}`),U({type:"text",value:w,output:e});continue}if(!0!==n.dot&&("slash"===L.type||"bos"===L.type)){U({type:"qmark",value:w,output:E});continue}U({type:"qmark",value:w,output:$});continue}if("!"===w){if(!0!==n.noextglob&&"("===k()&&("?"!==k(2)||!/[!=<:]/.test(k(3)))){V("negate",w);continue}if(!0!==n.nonegate&&0===y.index){M();continue}}if("+"===w){if(!0!==n.noextglob&&"("===k()&&"?"!==k(2)){V("plus",w);continue}if(L&&"("===L.value||!1===n.regex){U({type:"plus",value:w,output:h});continue}if(L&&("bracket"===L.type||"paren"===L.type||"brace"===L.type)||y.parens>0){U({type:"plus",value:w});continue}U({type:"plus",value:h});continue}if("@"===w){if(!0!==n.noextglob&&"("===k()&&"?"!==k(2)){U({type:"at",extglob:!0,value:w,output:""});continue}U({type:"text",value:w});continue}if("*"!==w){"$"!==w&&"^"!==w||(w=`\\${w}`);const t=REGEX_NON_SPECIAL_CHARS.exec(D());t&&(w+=t[0],y.index+=t[0].length),U({type:"text",value:w});continue}if(L&&("globstar"===L.type||!0===L.star)){L.type="star",L.star=!0,L.value+=w,L.output=b,y.backtrack=!0,y.globstar=!0,P(w);continue}let e=D();if(!0!==n.noextglob&&/^\([^?]/.test(e)){V("star",w);continue}if("star"===L.type){if(!0===n.noglobstar){P(w);continue}const i=L.prev,s=i.prev,r="slash"===i.type||"bos"===i.type,o=s&&("star"===s.type||"globstar"===s.type);if(!0===n.bash&&(!r||e[0]&&"/"!==e[0])){U({type:"star",value:w,output:""});continue}if(!r&&"paren"!==i.type&&!(y.braces>0&&("comma"===i.type||"brace"===i.type))&&!(x.length&&("pipe"===i.type||"paren"===i.type))){U({type:"star",value:w,output:""});continue}for(;"/**"===e.slice(0,3);){const n=t[y.index+4];if(n&&"/"!==n)break;e=e.slice(3),P("/**",3)}if("bos"===i.type&&N()){L.type="globstar",L.value+=w,L.output=O(n),y.output=L.output,y.globstar=!0,P(w);continue}if("slash"===i.type&&"bos"!==i.prev.type&&!o&&N()){y.output=y.output.slice(0,-(i.output+L.output).length),i.output=`(?:${i.output}`,L.type="globstar",L.output=O(n)+(n.strictSlashes?")":"|$)"),L.value+=w,y.globstar=!0,y.output+=i.output+L.output,P(w);continue}if("slash"===i.type&&"bos"!==i.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";y.output=y.output.slice(0,-(i.output+L.output).length),i.output=`(?:${i.output}`,L.type="globstar",L.output=`${O(n)}${m}|${m}${t})`,L.value+=w,y.output+=i.output+L.output,y.globstar=!0,P(w+I()),U({type:"slash",value:"/",output:""});continue}if("bos"===i.type&&"/"===e[0]){L.type="globstar",L.value+=w,L.output=`(?:^|${m}|${O(n)}${m})`,y.output=L.output,y.globstar=!0,P(w+I()),U({type:"slash",value:"/",output:""});continue}y.output=y.output.slice(0,-L.output.length),L.type="globstar",L.output=O(n),L.value+=w,y.output+=L.output,y.globstar=!0,P(w);continue}const i={type:"star",value:w,output:b};!0!==n.bash?!L||"bracket"!==L.type&&"paren"!==L.type||!0!==n.regex?(y.index!==y.start&&"slash"!==L.type&&"dot"!==L.type||("dot"===L.type?(y.output+=_,L.output+=_):!0===n.dot?(y.output+=A,L.output+=A):(y.output+=S,L.output+=S),"*"!==k()&&(y.output+=d,L.output+=d)),U(i)):(i.output=w,U(i)):(i.output=".*?","bos"!==L.type&&"slash"!==L.type||(i.output=S+i.output),U(i))}for(;y.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(syntaxError("closing","]"));y.output=utils$1.escapeLast(y.output,"["),G("brackets")}for(;y.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(syntaxError("closing",")"));y.output=utils$1.escapeLast(y.output,"("),G("parens")}for(;y.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(syntaxError("closing","}"));y.output=utils$1.escapeLast(y.output,"{"),G("braces")}if(!0===n.strictSlashes||"star"!==L.type&&"bracket"!==L.type||U({type:"maybe_slash",value:"",output:`${m}?`}),!0===y.backtrack){y.output="";for(const t of y.tokens)y.output+=null!=t.output?t.output:t.value,t.suffix&&(y.output+=t.suffix)}return y};parse$1.fastpaths=(t,e)=>{const n={...e},i="number"==typeof n.maxLength?Math.min(MAX_LENGTH,n.maxLength):MAX_LENGTH,s=t.length;if(s>i)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${i}`);t=REPLACEMENTS[t]||t;const r=utils$1.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:c,DOTS_SLASH:u,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:h,STAR:m,START_ANCHOR:d}=constants$1.globChars(r),f=n.dot?p:l,g=n.dot?h:l,_=n.capture?"":"?:";let A=!0===n.bash?".*?":m;n.capture&&(A=`(${A})`);const $=t=>!0===t.noglobstar?A:`(${_}(?:(?!${d}${t.dot?u:o}).)*?)`,E=t=>{switch(t){case"*":return`${f}${c}${A}`;case".*":return`${o}${c}${A}`;case"*.*":return`${f}${A}${o}${c}${A}`;case"*/*":return`${f}${A}${a}${c}${g}${A}`;case"**":return f+$(n);case"**/*":return`(?:${f}${$(n)}${a})?${g}${c}${A}`;case"**/*.*":return`(?:${f}${$(n)}${a})?${g}${A}${o}${c}${A}`;case"**/.*":return`(?:${f}${$(n)}${a})?${o}${c}${A}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const n=E(e[1]);if(!n)return;return n+o+e[2]}}},C=utils$1.removePrefix(t,{negated:!1,prefix:""});let R=E(C);return R&&!0!==n.strictSlashes&&(R+=`${a}?`),R};var parse_1=parse$1;const path$4=path$6,scan=scan_1,parse=parse_1,utils=utils$3,constants=constants$2,isObject=t=>t&&"object"==typeof t&&!Array.isArray(t),picomatch$1=(t,e,n=!1)=>{if(Array.isArray(t)){const i=t.map((t=>picomatch$1(t,e,n))),s=t=>{for(const e of i){const n=e(t);if(n)return n}return!1};return s}const i=isObject(t)&&t.tokens&&t.input;if(""===t||"string"!=typeof t&&!i)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},r=utils.isWindows(e),o=i?picomatch$1.compileRe(t,e):picomatch$1.makeRe(t,e,!1,!0),a=o.state;delete o.state;let c=()=>!1;if(s.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};c=picomatch$1(s.ignore,t,n)}const u=(n,i=!1)=>{const{isMatch:u,match:l,output:p}=picomatch$1.test(n,o,e,{glob:t,posix:r}),h={glob:t,state:a,regex:o,posix:r,input:n,output:p,match:l,isMatch:u};return"function"==typeof s.onResult&&s.onResult(h),!1===u?(h.isMatch=!1,!!i&&h):c(n)?("function"==typeof s.onIgnore&&s.onIgnore(h),h.isMatch=!1,!!i&&h):("function"==typeof s.onMatch&&s.onMatch(h),!i||h)};return n&&(u.state=a),u};picomatch$1.test=(t,e,n,{glob:i,posix:s}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const r=n||{},o=r.format||(s?utils.toPosixSlashes:null);let a=t===i,c=a&&o?o(t):t;return!1===a&&(c=o?o(t):t,a=c===i),!1!==a&&!0!==r.capture||(a=!0===r.matchBase||!0===r.basename?picomatch$1.matchBase(t,e,n,s):e.exec(c)),{isMatch:Boolean(a),match:a,output:c}},picomatch$1.matchBase=(t,e,n,i=utils.isWindows(n))=>(e instanceof RegExp?e:picomatch$1.makeRe(e,n)).test(path$4.basename(t)),picomatch$1.isMatch=(t,e,n)=>picomatch$1(e,n)(t),picomatch$1.parse=(t,e)=>Array.isArray(t)?t.map((t=>picomatch$1.parse(t,e))):parse(t,{...e,fastpaths:!1}),picomatch$1.scan=(t,e)=>scan(t,e),picomatch$1.compileRe=(t,e,n=!1,i=!1)=>{if(!0===n)return t.output;const s=e||{};let r=`${s.contains?"":"^"}(?:${t.output})${s.contains?"":"$"}`;t&&!0===t.negated&&(r=`^(?!${r}).*$`);const o=picomatch$1.toRegex(r,e);return!0===i&&(o.state=t),o},picomatch$1.makeRe=(t,e={},n=!1,i=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(s.output=parse.fastpaths(t,e)),s.output||(s=parse(t,e)),picomatch$1.compileRe(s,e,n,i)},picomatch$1.toRegex=(t,e)=>{try{const n=e||{};return new RegExp(t,n.flags||(n.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},picomatch$1.constants=constants;var picomatch_1=picomatch$1;picomatch$2.exports=picomatch_1;var picomatch=getDefaultExportFromCjs(picomatchExports);const matchPattern=(t,e={cwd:process.cwd(),ignore:[]})=>{const n=e.cwd;return function t(e,i,s,r){if(!require$$0$1.existsSync(e))return[];const o=require$$0$1.readdirSync(e),a=[];for(const r of o){const o=path$6.resolve(e,r),c=require$$0$1.statSync(o);if(c.isDirectory()&&s(o.replace(n,""))){const e=t(o,i,s);a.push(...e)}else c.isFile()&&i(o.replace(n,""))&&a.push(o)}return a}(n,picomatch(t,{ignore:e.ignore||[]}),picomatch("**",{ignore:e.ignore||[]}))};function extractInput(t){const e=[],n=[];for(const i of t)require$$0$1.existsSync(i)&&require$$0$1.statSync(i).isFile()?n.push(path$6.resolve(i)):e.push(i);return 0===n.length&&0===e.length&&e.push("**/*.{js,ts,jsx,tsx}"),{files:n,patts:e}}function extractFiles(t){const{files:e,patts:n}=extractInput(t);return[...e,...matchPattern(n,{cwd:process.cwd(),ignore:["**/node_modules/**"]})]}var CURRENT_CONFIG$1;function getConfig$1(){return CURRENT_CONFIG$1||(CURRENT_CONFIG$1=buildTransformOptionsSync({})),CURRENT_CONFIG$1}function transformJS(t){const e=getConfig$1()[1];return core$1.transform(t,e).code}function transformTS(t,e){const[n,i]=getConfig$1(),s=core$1.createSwcPlugin(i,t,core$1.getSpanOffset()),r=Object.assign(Object.assign({},n),{module:Object.assign(Object.assign({},n.module),{type:"es6"}),plugin:s,filename:e}),o=/\.(js|ts)x$/.test(e),a=/\.tsx?$/.test(e)?{syntax:"typescript",tsx:o}:{syntax:"ecmascript",jsx:o};return r.jsc?r.jsc.parser=a:r.jsc={parser:a},core.transformSync(t,r).code}var commanderExports={},commander$1={get exports(){return commanderExports},set exports(t){commanderExports=t}},argument={},error={};let CommanderError$2=class extends Error{constructor(t,e,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}},InvalidArgumentError$3=class extends CommanderError$2{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};error.CommanderError=CommanderError$2,error.InvalidArgumentError=InvalidArgumentError$3;const{InvalidArgumentError:InvalidArgumentError$2}=error;let Argument$2=class{constructor(t,e){switch(this.description=e||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new InvalidArgumentError$2(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function humanReadableArgName$2(t){const e=t.name()+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"}argument.Argument=Argument$2,argument.humanReadableArgName=humanReadableArgName$2;var command={},help={};const{humanReadableArgName:humanReadableArgName$1}=argument;let Help$2=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){const e=t.commands.filter((t=>!t._hidden));if(t._hasImplicitHelpCommand()){const[,n,i]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),s=t.createCommand(n).helpOption(!1);s.description(t._helpCommandDescription),i&&s.arguments(i),e.push(s)}return this.sortSubcommands&&e.sort(((t,e)=>t.name().localeCompare(e.name()))),e}compareOptions(t,e){const n=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");return n(t).localeCompare(n(e))}visibleOptions(t){const e=t.options.filter((t=>!t.hidden)),n=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),i=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(n||i){let s;s=t.createOption(n?i?t._helpFlags:t._helpShortFlag:t._helpLongFlag,t._helpDescription),e.push(s)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];const e=[];for(let n=t.parent;n;n=n.parent){const t=n.options.filter((t=>!t.hidden));e.push(...t)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleArguments(t){return t._argsDescription&&t._args.forEach((e=>{e.description=e.description||t._argsDescription[e.name()]||""})),t._args.find((t=>t.description))?t._args:[]}subcommandTerm(t){const e=t._args.map((t=>humanReadableArgName$1(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce(((t,n)=>Math.max(t,e.subcommandTerm(n).length)),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce(((t,n)=>Math.max(t,e.optionTerm(n).length)),0)}longestGlobalOptionTermLength(t,e){return e.visibleGlobalOptions(t).reduce(((t,n)=>Math.max(t,e.optionTerm(n).length)),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce(((t,n)=>Math.max(t,e.argumentTerm(n).length)),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let n="";for(let e=t.parent;e;e=e.parent)n=e.name()+" "+n;return n+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue){(t.required||t.optional||t.isBoolean()&&"boolean"==typeof t.defaultValue)&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`)}return void 0!==t.presetArg&&t.optional&&e.push(`preset: ${JSON.stringify(t.presetArg)}`),void 0!==t.envVar&&e.push(`env: ${t.envVar}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}argumentDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0){const n=`(${e.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}formatHelp(t,e){const n=e.padWidth(t,e),i=e.helpWidth||80,s=2,r=2;function o(t,o){if(o){const a=`${t.padEnd(n+r)}${o}`;return e.wrap(a,i-s,n+r)}return t}function a(t){return t.join("\n").replace(/^/gm," ".repeat(s))}let c=[`Usage: ${e.commandUsage(t)}`,""];const u=e.commandDescription(t);u.length>0&&(c=c.concat([e.wrap(u,i,0),""]));const l=e.visibleArguments(t).map((t=>o(e.argumentTerm(t),e.argumentDescription(t))));l.length>0&&(c=c.concat(["Arguments:",a(l),""]));const p=e.visibleOptions(t).map((t=>o(e.optionTerm(t),e.optionDescription(t))));if(p.length>0&&(c=c.concat(["Options:",a(p),""])),this.showGlobalOptions){const n=e.visibleGlobalOptions(t).map((t=>o(e.optionTerm(t),e.optionDescription(t))));n.length>0&&(c=c.concat(["Global Options:",a(n),""]))}const h=e.visibleCommands(t).map((t=>o(e.subcommandTerm(t),e.subcommandDescription(t))));return h.length>0&&(c=c.concat(["Commands:",a(h),""])),c.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestGlobalOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,n,i=40){const s=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(t.match(s))return t;const r=e-n;if(r<i)return t;const o=t.slice(0,n),a=t.slice(n).replace("\r\n","\n"),c=" ".repeat(n),u="\\s​",l=new RegExp(`\n|.{1,${r-1}}([${u}]|$)|[^${u}]+?([${u}]|$)`,"g");return o+(a.match(l)||[]).map(((t,e)=>"\n"===t?"":(e>0?c:"")+t.trimEnd())).join("\n")}};help.Help=Help$2;var option={};const{InvalidArgumentError:InvalidArgumentError$1}=error;let Option$2=class{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const n=splitOptionFlags$1(t);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let e=t;return"string"==typeof t&&(e={[t]:!0}),this.implied=Object.assign(this.implied||{},e),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new InvalidArgumentError$1(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return camelcase(this.name().replace(/^no-/,""))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},DualOptions$1=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach((t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)})),this.negativeOptions.forEach(((t,e)=>{this.positiveOptions.has(e)&&this.dualOptions.add(e)}))}valueFromOption(t,e){const n=e.attributeName();if(!this.dualOptions.has(n))return!0;const i=this.negativeOptions.get(n).presetArg;return e.negate===((void 0!==i&&i)===t)}};function camelcase(t){return t.split("-").reduce(((t,e)=>t+e[0].toUpperCase()+e.slice(1)))}function splitOptionFlags$1(t){let e,n;const i=t.split(/[ |,]+/);return i.length>1&&!/^[[<]/.test(i[1])&&(e=i.shift()),n=i.shift(),!e&&/^-[^-]$/.test(n)&&(e=n,n=void 0),{shortFlag:e,longFlag:n}}option.Option=Option$2,option.splitOptionFlags=splitOptionFlags$1,option.DualOptions=DualOptions$1;var suggestSimilar$2={};const maxDistance=3;function editDistance(t,e){if(Math.abs(t.length-e.length)>maxDistance)return Math.max(t.length,e.length);const n=[];for(let e=0;e<=t.length;e++)n[e]=[e];for(let t=0;t<=e.length;t++)n[0][t]=t;for(let i=1;i<=e.length;i++)for(let s=1;s<=t.length;s++){let r=1;r=t[s-1]===e[i-1]?0:1,n[s][i]=Math.min(n[s-1][i]+1,n[s][i-1]+1,n[s-1][i-1]+r),s>1&&i>1&&t[s-1]===e[i-2]&&t[s-2]===e[i-1]&&(n[s][i]=Math.min(n[s][i],n[s-2][i-2]+1))}return n[t.length][e.length]}function suggestSimilar$1(t,e){if(!e||0===e.length)return"";e=Array.from(new Set(e));const n=t.startsWith("--");n&&(t=t.slice(2),e=e.map((t=>t.slice(2))));let i=[],s=maxDistance;return e.forEach((e=>{if(e.length<=1)return;const n=editDistance(t,e),r=Math.max(t.length,e.length);(r-n)/r>.4&&(n<s?(s=n,i=[e]):n===s&&i.push(e))})),i.sort(((t,e)=>t.localeCompare(e))),n&&(i=i.map((t=>`--${t}`))),i.length>1?`\n(Did you mean one of ${i.join(", ")}?)`:1===i.length?`\n(Did you mean ${i[0]}?)`:""}suggestSimilar$2.suggestSimilar=suggestSimilar$1;const EventEmitter=require$$0$2.EventEmitter,childProcess=require$$1,path$3=path$6,fs$3=require$$0$1,process$1=process$2,{Argument:Argument$1,humanReadableArgName:humanReadableArgName}=argument,{CommanderError:CommanderError$1}=error,{Help:Help$1}=help,{Option:Option$1,splitOptionFlags:splitOptionFlags,DualOptions:DualOptions}=option,{suggestSimilar:suggestSimilar}=suggestSimilar$2;let Command$1=class t extends EventEmitter{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:t=>process$1.stdout.write(t),writeErr:t=>process$1.stderr.write(t),getOutHelpWidth:()=>process$1.stdout.isTTY?process$1.stdout.columns:void 0,getErrHelpWidth:()=>process$1.stderr.isTTY?process$1.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,e,n){let i=e,s=n;"object"==typeof i&&null!==i&&(s=i,i=null),s=s||{};const[,r,o]=t.match(/([^ ]+) *(.*)/),a=this.createCommand(r);return i&&(a.description(i),a._executableHandler=!0),s.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!s.noHelp&&!s.hidden),a._executableFile=s.executableFile||null,o&&a.arguments(o),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),i?this:a}createCommand(e){return new t(e)}createHelp(){return Object.assign(new Help$1,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return"string"!=typeof t&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,e){return new Argument$1(t,e)}argument(t,e,n,i){const s=this.createArgument(t,e);return"function"==typeof n?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(t){return t.split(/ +/).forEach((t=>{this.argument(t)})),this}addArgument(t){const e=this._args.slice(-1)[0];if(e&&e.variadic)throw new Error(`only the last argument can be variadic '${e.name()}'`);if(t.required&&void 0!==t.defaultValue&&void 0===t.parseArg)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,e){const n=["preSubcommand","preAction","postAction"];if(!n.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.\nExpecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(e):this._lifeCycleHooks[t]=[e],this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,n){this._exitCallback&&this._exitCallback(new CommanderError$1(t,e,n)),process$1.exit(t)}action(t){return this._actionHandler=e=>{const n=this._args.length,i=e.slice(0,n);return i[n]=this._storeOptionsAsProperties?this:this.opts(),i.push(this),t.apply(this,i)},this}createOption(t,e){return new Option$1(t,e)}addOption(t){const e=t.name(),n=t.attributeName();if(t.negate){const e=t.long.replace(/^--no-/,"--");this._findOption(e)||this.setOptionValueWithSource(n,void 0===t.defaultValue||t.defaultValue,"default")}else void 0!==t.defaultValue&&this.setOptionValueWithSource(n,t.defaultValue,"default");this.options.push(t);const i=(e,i,s)=>{null==e&&void 0!==t.presetArg&&(e=t.presetArg);const r=this.getOptionValue(n);if(null!==e&&t.parseArg)try{e=t.parseArg(e,r)}catch(t){if("commander.invalidArgument"===t.code){this.error(`${i} ${t.message}`,{exitCode:t.exitCode,code:t.code})}throw t}else null!==e&&t.variadic&&(e=t._concatValue(e,r));null==e&&(e=!t.negate&&(!(!t.isBoolean()&&!t.optional)||"")),this.setOptionValueWithSource(n,e,s)};return this.on("option:"+e,(e=>{i(e,`error: option '${t.flags}' argument '${e}' is invalid.`,"cli")})),t.envVar&&this.on("optionEnv:"+e,(e=>{i(e,`error: option '${t.flags}' value '${e}' from env '${t.envVar}' is invalid.`,"env")})),this}_optionEx(t,e,n,i,s){if("object"==typeof e&&e instanceof Option$1)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const r=this.createOption(e,n);if(r.makeOptionMandatory(!!t.mandatory),"function"==typeof i)r.default(s).argParser(i);else if(i instanceof RegExp){const t=i;i=(e,n)=>{const i=t.exec(e);return i?i[0]:n},r.default(s).argParser(i)}else r.default(i);return this.addOption(r)}option(t,e,n,i){return this._optionEx({},t,e,n,i)}requiredOption(t,e,n,i){return this._optionEx({mandatory:!0},t,e,n,i)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,e){return this.setOptionValueWithSource(t,e,void 0)}setOptionValueWithSource(t,e,n){return this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e,this._optionValueSources[t]=n,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let e;return getCommandAndParents(this).forEach((n=>{void 0!==n.getOptionValueSource(t)&&(e=n.getOptionValueSource(t))})),e}_prepareUserArgs(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let n;switch(e=e||{},void 0===t&&(t=process$1.argv,process$1.versions&&process$1.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],n=t.slice(2);break;case"electron":process$1.defaultApp?(this._scriptPath=t[1],n=t.slice(2)):n=t.slice(1);break;case"user":n=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(t,e){const n=this._prepareUserArgs(t,e);return this._parseCommand([],n),this}async parseAsync(t,e){const n=this._prepareUserArgs(t,e);return await this._parseCommand([],n),this}_executeSubCommand(t,e){e=e.slice();let n=!1;const i=[".js",".ts",".tsx",".mjs",".cjs"];function s(t,e){const n=path$3.resolve(t,e);if(fs$3.existsSync(n))return n;if(i.includes(path$3.extname(e)))return;const s=i.find((t=>fs$3.existsSync(`${n}${t}`)));return s?`${n}${s}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let r,o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let t;try{t=fs$3.realpathSync(this._scriptPath)}catch(e){t=this._scriptPath}a=path$3.resolve(path$3.dirname(t),a)}if(a){let e=s(a,o);if(!e&&!t._executableFile&&this._scriptPath){const n=path$3.basename(this._scriptPath,path$3.extname(this._scriptPath));n!==this._name&&(e=s(a,`${n}-${t._name}`))}o=e||o}if(n=i.includes(path$3.extname(o)),"win32"!==process$1.platform?n?(e.unshift(o),e=incrementNodeInspectorPort(process$1.execArgv).concat(e),r=childProcess.spawn(process$1.argv[0],e,{stdio:"inherit"})):r=childProcess.spawn(o,e,{stdio:"inherit"}):(e.unshift(o),e=incrementNodeInspectorPort(process$1.execArgv).concat(e),r=childProcess.spawn(process$1.execPath,e,{stdio:"inherit"})),!r.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((t=>{process$1.on(t,(()=>{!1===r.killed&&null===r.exitCode&&r.kill(t)}))}))}const c=this._exitCallback;r.on("close",c?()=>{c(new CommanderError$1(process$1.exitCode||0,"commander.executeSubCommandAsync","(close)"))}:process$1.exit.bind(process$1)),r.on("error",(e=>{if("ENOENT"===e.code){throw new Error(`'${o}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory"}`)}if("EACCES"===e.code)throw new Error(`'${o}' not executable`);if(c){const t=new CommanderError$1(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,c(t)}else process$1.exit(1)})),this.runningCommand=r}_dispatchSubcommand(t,e,n){const i=this._findCommand(t);let s;return i||this.help({error:!0}),s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,(()=>{if(!i._executableHandler)return i._parseCommand(e,n);this._executeSubCommand(i,e.concat(n))})),s}_checkNumberOfArguments(){this._args.forEach(((t,e)=>{t.required&&null==this.args[e]&&this.missingArgument(t.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const t=(t,e,n)=>{let i=e;if(null!==e&&t.parseArg)try{i=t.parseArg(e,n)}catch(n){if("commander.invalidArgument"===n.code){const i=`error: command-argument value '${e}' is invalid for argument '${t.name()}'. ${n.message}`;this.error(i,{exitCode:n.exitCode,code:n.code})}throw n}return i};this._checkNumberOfArguments();const e=[];this._args.forEach(((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce(((e,i)=>t(n,i,e)),n.defaultValue))):void 0===s&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=t(n,s,n.defaultValue))),e[i]=s})),this.processedArgs=e}_chainOrCall(t,e){return t&&t.then&&"function"==typeof t.then?t.then((()=>e())):e()}_chainOrCallHooks(t,e){let n=t;const i=[];return getCommandAndParents(this).reverse().filter((t=>void 0!==t._lifeCycleHooks[e])).forEach((t=>{t._lifeCycleHooks[e].forEach((e=>{i.push({hookedCommand:t,callback:e})}))})),"postAction"===e&&i.reverse(),i.forEach((t=>{n=this._chainOrCall(n,(()=>t.callback(t.hookedCommand,this)))})),n}_chainOrCallSubCommandHook(t,e,n){let i=t;return void 0!==this._lifeCycleHooks[n]&&this._lifeCycleHooks[n].forEach((t=>{i=this._chainOrCall(i,(()=>t(this,e)))})),i}_parseCommand(t,e){const n=this.parseOptions(e);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(n.operands),this.args=t.concat(e=n.unknown),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),e);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return 1===t.length&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return outputHelpIfRequested(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),outputHelpIfRequested(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},s=`command:${this.name()}`;if(this._actionHandler){let n;return i(),this._processArguments(),n=this._chainOrCallHooks(n,"preAction"),n=this._chainOrCall(n,(()=>this._actionHandler(this.processedArgs))),this.parent&&(n=this._chainOrCall(n,(()=>{this.parent.emit(s,t,e)}))),n=this._chainOrCallHooks(n,"postAction"),n}if(this.parent&&this.parent.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,t,e);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,e);this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(t){if(t)return this.commands.find((e=>e._name===t||e._aliases.includes(t)))}_findOption(t){return this.options.find((e=>e.is(t)))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach((e=>{e.mandatory&&void 0===t.getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)}))}_checkForConflictingLocalOptions(){const t=this.options.filter((t=>{const e=t.attributeName();return void 0!==this.getOptionValue(e)&&"default"!==this.getOptionValueSource(e)})),e=t.filter((t=>t.conflictsWith.length>0));e.forEach((e=>{const n=t.find((t=>e.conflictsWith.includes(t.attributeName())));n&&this._conflictingOption(e,n)}))}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){const e=[],n=[];let i=e;const s=t.slice();function r(t){return t.length>1&&"-"===t[0]}let o=null;for(;s.length;){const t=s.shift();if("--"===t){i===n&&i.push(t),i.push(...s);break}if(!o||r(t)){if(o=null,r(t)){const e=this._findOption(t);if(e){if(e.required){const t=s.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;s.length>0&&!r(s[0])&&(t=s.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);o=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),s.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),n=this._findOption(t.slice(0,e));if(n&&(n.required||n.optional)){this.emit(`option:${n.name()}`,t.slice(e+1));continue}}if(r(t)&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===n.length){if(this._findCommand(t)){e.push(t),s.length>0&&n.push(...s);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),s.length>0&&e.push(...s);break}if(this._defaultCommandName){n.push(t),s.length>0&&n.push(...s);break}}if(this._passThroughOptions){i.push(t),s.length>0&&i.push(...s);break}i.push(t)}else this.emit(`option:${o.name()}`,t)}return{operands:e,unknown:n}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let n=0;n<e;n++){const e=this.options[n].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}optsWithGlobals(){return getCommandAndParents(this).reduce(((t,e)=>Object.assign(t,e.opts())),{})}error(t,e){this._outputConfiguration.outputError(`${t}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const n=e||{};this._exit(n.exitCode||1,n.code||"commander.error",t)}_parseOptionsEnv(){this.options.forEach((t=>{if(t.envVar&&t.envVar in process$1.env){const e=t.attributeName();(void 0===this.getOptionValue(e)||["default","config","env"].includes(this.getOptionValueSource(e)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,process$1.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}}))}_parseOptionsImplied(){const t=new DualOptions(this.options),e=t=>void 0!==this.getOptionValue(t)&&!["default","implied"].includes(this.getOptionValueSource(t));this.options.filter((n=>void 0!==n.implied&&e(n.attributeName())&&t.valueFromOption(this.getOptionValue(n.attributeName()),n))).forEach((t=>{Object.keys(t.implied).filter((t=>!e(t))).forEach((e=>{this.setOptionValueWithSource(e,t.implied[e],"implied")}))}))}missingArgument(t){this.error(`error: missing required argument '${t}'`,{code:"commander.missingArgument"})}optionMissingArgument(t){this.error(`error: option '${t.flags}' argument missing`,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){this.error(`error: required option '${t.flags}' not specified`,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,e){const n=t=>{const e=t.attributeName(),n=this.getOptionValue(e),i=this.options.find((t=>t.negate&&e===t.attributeName())),s=this.options.find((t=>!t.negate&&e===t.attributeName()));return i&&(void 0===i.presetArg&&!1===n||void 0!==i.presetArg&&n===i.presetArg)?i:s||t},i=t=>{const e=n(t),i=e.attributeName();return"env"===this.getOptionValueSource(i)?`environment variable '${e.envVar}'`:`option '${e.flags}'`},s=`error: ${i(t)} cannot be used with ${i(e)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let e="";if(t.startsWith("--")&&this._showSuggestionAfterError){let n=[],i=this;do{const t=i.createHelp().visibleOptions(i).filter((t=>t.long)).map((t=>t.long));n=n.concat(t),i=i.parent}while(i&&!i._enablePositionalOptions);e=suggestSimilar(t,n)}this.error(`error: unknown option '${t}'${e}`,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;const e=this._args.length,n=1===e?"":"s",i=this.parent?` for '${this.name()}'`:"";this.error(`error: too many arguments${i}. Expected ${e} argument${n} but got ${t.length}.`,{code:"commander.excessArguments"})}unknownCommand(){const t=this.args[0];let e="";if(this._showSuggestionAfterError){const n=[];this.createHelp().visibleCommands(this).forEach((t=>{n.push(t.name()),t.alias()&&n.push(t.alias())})),e=suggestSimilar(t,n)}this.error(`error: unknown command '${t}'${e}`,{code:"commander.unknownCommand"})}version(t,e,n){if(void 0===t)return this._version;this._version=t;const i=this.createOption(e=e||"-V, --version",n=n||"output the version number");return this._versionOptionName=i.attributeName(),this.options.push(i),this.on("option:"+i.name(),(()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)})),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,e&&(this._argsDescription=e),this)}summary(t){return void 0===t?this._summary:(this._summary=t,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach((t=>this.alias(t))),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this._args.map((t=>humanReadableArgName(t)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=path$3.basename(t,path$3.extname(t)),this}executableDir(t){return void 0===t?this._executableDir:(this._executableDir=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let n;return n=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||n,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const n=this._getHelpContext(t);getCommandAndParents(this).reverse().forEach((t=>t.emit("beforeAllHelp",n))),this.emit("beforeHelp",n);let i=this.helpInformation(n);if(e&&(i=e(i),"string"!=typeof i&&!Buffer.isBuffer(i)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(i),this.emit(this._helpLongFlag),this.emit("afterHelp",n),getCommandAndParents(this).forEach((t=>t.emit("afterAllHelp",n)))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const n=splitOptionFlags(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(t){this.outputHelp(t);let e=process$1.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const n=["beforeAll","before","after","afterAll"];if(!n.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${n.join("', '")}'`);return this.on(`${t}Help`,(t=>{let n;n="function"==typeof e?e({error:t.error,command:t.command}):e,n&&t.write(`${n}\n`)})),this}};function outputHelpIfRequested(t,e){t._hasHelpOption&&e.find((e=>e===t._helpLongFlag||e===t._helpShortFlag))&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function incrementNodeInspectorPort(t){return t.map((t=>{if(!t.startsWith("--inspect"))return t;let e,n,i="127.0.0.1",s="9229";return null!==(n=t.match(/^(--inspect(-brk)?)$/))?e=n[1]:null!==(n=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=n[1],/^\d+$/.test(n[3])?s=n[3]:i=n[3]):null!==(n=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=n[1],i=n[3],s=n[4]),e&&"0"!==s?`${e}=${i}:${parseInt(s)+1}`:t}))}function getCommandAndParents(t){const e=[];for(let n=t;n;n=n.parent)e.push(n);return e}command.Command=Command$1,function(t,e){const{Argument:n}=argument,{Command:i}=command,{CommanderError:s,InvalidArgumentError:r}=error,{Help:o}=help,{Option:a}=option;(e=t.exports=new i).program=e,e.Argument=n,e.Command=i,e.CommanderError=s,e.Help=o,e.InvalidArgumentError=r,e.InvalidOptionArgumentError=r,e.Option=a}(commander$1,commanderExports);var commander=commanderExports;const{Command:Command}=commander;var name="@macro-plugin/core",version="1.0.0",description="Macro system for JavaScript and TypeScript.",main="dist/index.js",module$1="dist/index.mjs",types="./dist/index.d.ts",bin={macros:"dist/cli.js"},files=["dist","CHANGELOG.md"],keywords=["macro","macros","cli","macro-plugin","macro-system"],scripts={build:"rollup -c ../../rollup.config.mjs"},dependencies={"@swc/core":"^1.3.40"},sideEffects=!1,exports$1={"./package.json":"./package.json",".":{import:"./dist/index.mjs",require:"./dist/index.js",types:"./dist/index.d.ts"},"./cli":{require:"./dist/cli.js"},"./register":{require:"./dist/register.js"}},author="Raven Satir",license="MIT",pkg={name:name,version:version,description:description,main:main,module:module$1,types:types,bin:bin,files:files,keywords:keywords,scripts:scripts,dependencies:dependencies,sideEffects:sideEffects,exports:exports$1,author:author,license:license},watchExports={},watch$1={get exports(){return watchExports},set exports(t){watchExports=t}},fs$2=require$$0$1,path$2=path$6,os$1=require$$2;function matchObject(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function checkStat(t,e){try{return e(t)}catch(e){if(/^(ENOENT|EPERM|EACCES)$/.test(e.code))return"ENOENT"!==e.code&&console.warn("Warning: Cannot access %s",t),!1;throw e}}var is$2={nil:function(t){return null==t},array:function(t){return Array.isArray(t)},emptyObject:function(t){for(var e in t)return!1;return!0},buffer:function(t){return Buffer.isBuffer(t)},regExp:function(t){return matchObject(t,"RegExp")},string:function(t){return matchObject(t,"String")},func:function(t){return"function"==typeof t},number:function(t){return matchObject(t,"Number")},exists:function(t){return fs$2.existsSync(t)},file:function(t){return checkStat(t,(function(t){return fs$2.statSync(t).isFile()}))},samePath:function(t,e){return path$2.resolve(t)===path$2.resolve(e)},directory:function(t){return checkStat(t,(function(t){return fs$2.statSync(t).isDirectory()}))},symbolicLink:function(t){return checkStat(t,(function(t){return fs$2.lstatSync(t).isSymbolicLink()}))},windows:function(){return"win32"===os$1.platform()}},is_1=is$2,fs$1=require$$0$1,os=require$$2,path$1=path$6,is$1=is_1,IS_SUPPORT,TEMP_DIR=os.tmpdir&&os.tmpdir()||process.env.TMPDIR||process.env.TEMP||process.cwd();function TempStack(){this.stack=[]}TempStack.prototype={create:function(t,e){var n=path$1.join(e,"node-watch-"+Math.random().toString(16).substr(2));return this.stack.push({name:n,type:t}),n},write:function(){for(var t=0;t<arguments.length;++t)fs$1.writeFileSync(arguments[t]," ")},mkdir:function(){for(var t=0;t<arguments.length;++t)fs$1.mkdirSync(arguments[t])},cleanup:function(t){try{for(var e;e=this.stack.pop();){var n=e.type,i=e.name;"file"===n&&is$1.file(i)?fs$1.unlinkSync(i):"dir"===n&&is$1.directory(i)&&fs$1.rmdirSync(i)}}finally{is$1.func(t)&&t()}}};var pending=!1,hasNativeRecursive$1=function t(e){if(!is$1.func(e))return!1;if(void 0!==IS_SUPPORT)return e(IS_SUPPORT);if(pending)return setTimeout((function(){t(e)}),300);pending=!0;var n=new TempStack,i=n.create("dir",TEMP_DIR),s=n.create("dir",i),r=n.create("file",s);n.mkdir(i,s);var o;try{o=fs$1.watch(i,{recursive:!0})}catch(t){if("ERR_FEATURE_UNAVAILABLE_ON_PLATFORM"==t.code)return e(IS_SUPPORT=!1);throw t}if(!o)return!1;var a=setTimeout((function(){o.close(),n.cleanup((function(){e(IS_SUPPORT=!1)}))}),200);o.on("change",(function(t,i){path$1.basename(r)===path$1.basename(i)&&(o.close(),clearTimeout(a),n.cleanup((function(){e(IS_SUPPORT=!0)})))})),n.write(r)},fs=require$$0$1,path=path$6,util=require$$2$1,events=require$$0$2,hasNativeRecursive=hasNativeRecursive$1,is=is_1,EVENT_UPDATE="update",EVENT_REMOVE="remove",SKIP_FLAG=Symbol("skip");function hasDup(t){return t.some((function(t,e,n){return n.indexOf(t)!==e}))}function unique(t){return t.filter((function(t,e,n){return n.indexOf(t)===e}))}function flat1(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function assertEncoding(t){if(t&&"buffer"!==t&&!Buffer.isEncoding(t))throw new Error("Unknown encoding: "+t)}function guard(t){return is.func(t)?function(e,n){t(e,!1)&&n()}:is.regExp(t)?function(e,n){t.test(e)&&n()}:function(t,e){e()}}function composeMessage(t){return t.map((function(t){return is.exists(t)?[EVENT_UPDATE,t]:[EVENT_REMOVE,t]}))}function getMessages(t){var e=unique(t),n=/~$|^\.#|^##$/g;t.some((function(t){return n.test(t)}))&&(hasDup(t.map((function(t){return t.replace(n,"")})))&&(e=e.filter((function(t){return is.exists(t)}))));return composeMessage(e)}function debounce(t,e){var n,i=[],s=t.options.encoding,r=t.options.delay;function o(){getMessages(i).forEach((function(t){t[1]=Buffer.from(t[1]),"buffer"!==s&&(t[1]=t[1].toString(s)),e.apply(null,t)})),n=null,i=[]}return is.number(r)||(r=200),function(t,e){i.push(e),n||(n=setTimeout(o,r))}}function createDupsFilter(){var t={};return function(e){return function(n,i){t[n+i]=[n,i],setTimeout((function(){Object.keys(t).forEach((function(n){e.apply(null,t[n])})),t={}}))}}}function getSubDirectories(t,e,n=function(){}){is.directory(t)?fs.readdir(t,(function(i,s){if(i){if(!/^(EPERM|EACCES)$/.test(i.code))throw i;console.warn("Warning: Cannot access %s.",t)}else s.forEach((function(n){var i=path.join(t,n);is.directory(i)&&e(i)})),n()})):n()}function semaphore(t){var e=0;return function(){return e++,function(){0===--e&&t()}}}function nullCounter(){return function(){}}function shouldNotSkip(t,e){return!is.func(e)||e(t,SKIP_FLAG)!==SKIP_FLAG}var deprecationWarning=util.deprecate((function(){}),"(node-watch) First param in callback function  is replaced with event name since 0.5.0, use  `(evt, filename) => {}` if you want to get the filename");function Watcher(){events.EventEmitter.call(this),this.watchers={},this._isReady=!1,this._isClosed=!1}function emitReady(t){t._isReady||(t._isReady=!0,process.nextTick((function(){t.emit("ready")})))}function emitClose(t){t.emit("close")}function composeWatcher(t){var e=new Watcher,n=createDupsFilter(),i=t.length;return t.forEach((function(t){t.on("change",n((function(t,n){e.emit("change",t,n)}))),t.on("error",(function(t){e.emit("error",t)})),t.on("ready",(function(){--i||emitReady(e)}))})),e.close=function(){t.forEach((function(t){t.close()})),process.nextTick(emitClose,e)},e.getWatchedPaths=function(e){if(is.func(e)){var n=t.map((function(t){return new Promise((function(e){t.getWatchedPaths(e)}))}));Promise.all(n).then((function(t){var n=unique(flat1(t));e(n)}))}},e.expose()}function watch(t,e,n){var i=new Watcher;if(is.buffer(t)&&(t=t.toString()),is.array(t)||is.exists(t)||i.emit("error",new Error(t+" does not exist.")),is.string(e)&&(e={encoding:e}),is.func(e)&&(n=e,e={}),arguments.length<2&&(e={}),e.encoding?assertEncoding(e.encoding):e.encoding="utf8",is.array(t)){if(1===t.length)return watch(t[0],e,n);var s=createDupsFilter();return composeWatcher(unique(t).map((function(t){var i=watch(t,e);return is.func(n)&&i.on("change",s(n)),i})))}if(is.file(t))i.watchFile(t,e,n),emitReady(i);else if(is.directory(t)){var r=semaphore((function(){emitReady(i)}));i.watchDirectory(t,e,n,r)}return i.expose()}util.inherits(Watcher,events.EventEmitter),Watcher.prototype.expose=function(){var t={},e=this;return["on","emit","once","close","isClosed","listeners","setMaxListeners","getMaxListeners","getWatchedPaths"].forEach((function(n){t[n]=function(){return e[n].apply(e,arguments)}})),t},Watcher.prototype.isClosed=function(){return this._isClosed},Watcher.prototype.close=function(t){var e=this;if(t){var n=this.watchers[t];n&&n.close&&(n.close(),delete e.watchers[t]),getSubDirectories(t,(function(t){e.close(t)}))}else Object.keys(e.watchers).forEach((function(t){var n=e.watchers[t];n&&n.close&&n.close()})),this.watchers={};is.emptyObject(e.watchers)&&(this._isClosed||(this._isClosed=!0,process.nextTick(emitClose,this)))},Watcher.prototype.getWatchedPaths=function(t){if(is.func(t)){var e=this;e._isReady?t(Object.keys(e.watchers)):e.on("ready",(function(){t(Object.keys(e.watchers))}))}},Watcher.prototype.add=function(t,e){var n=this,i=path.resolve((e=e||{fpath:""}).fpath);this.watchers[i]=t;var s=debounce(e,(function(t,i){e.compareName?e.compareName(i)&&n.emit("change",t,i):guard(e.options.filter)(i,(function(){n.flag?n.flag="":n.emit("change",t,i)}))}));t.on("error",(function(s){n.isClosed()||(is.windows()&&"EPERM"===s.code?(t.emit("change",EVENT_REMOVE,e.fpath&&""),n.flag="windows-error",n.close(i)):n.emit("error",s))})),t.on("change",(function(t,i){if(!n.isClosed()){var r=i;is.nil(r)&&(r=""),r=path.join(e.fpath,r),e.options.recursive&&hasNativeRecursive((function(t){if(!t){var i=path.resolve(r);if(is.exists(r))is.directory(r)&&!n.watchers[i]&&shouldNotSkip(r,e.options.filter)&&n.watchDirectory(r,e.options);else n.close(i)}})),s(t,r)}}))},Watcher.prototype.watchFile=function(t,e,n){var i=path.join(t,"../"),s=Object.assign({},e,{filter:null,encoding:"utf8"});delete s.recursive;var r=fs.watch(i,s);this.add(r,{type:"file",fpath:i,options:Object.assign({},s,{encoding:e.encoding}),compareName:function(e){return is.samePath(e,t)}}),is.func(n)&&(1===n.length&&deprecationWarning(),this.on("change",n))},Watcher.prototype.watchDirectory=function(t,e,n,i=nullCounter){var s=this,r=i();hasNativeRecursive((function(o){e.recursive=!!e.recursive;var a=Object.assign({},e,{encoding:"utf8"});if(o||delete a.recursive,s._isClosed)return r(),s.close();var c=fs.watch(t,a);s.add(c,{type:"dir",fpath:t,options:e}),is.func(n)&&(1===n.length&&deprecationWarning(),s.on("change",n)),e.recursive&&!o&&getSubDirectories(t,(function(t){shouldNotSkip(t,e.filter)&&s.watchDirectory(t,e,null,i)}),i()),r()}))},watch$1.exports=watch,watchExports.default=watch;const CHAR_COUNT={"[":0,"]":0,"(":0,")":0,"{":0,"}":0};let CURRENT_CONFIG;const CACHE_FILE=path$6.join(process.cwd(),"<repl>.ts"),program=new Command;function isExprEnd(t){for(let e=0;e<t.length;e++)t[e]in CHAR_COUNT&&CHAR_COUNT[t[e]]++;return CHAR_COUNT["("]===CHAR_COUNT[")"]&&CHAR_COUNT["["]===CHAR_COUNT["]"]&&CHAR_COUNT["{"]===CHAR_COUNT["}"]&&!/[.?:]\s*$/.test(t)}function getConfig(){return CURRENT_CONFIG||(CURRENT_CONFIG=buildTransformOptionsSync({})[1]),CURRENT_CONFIG}function emitTypes(){const t=getConfig();core$1.transform("",Object.assign(Object.assign({},t),{emitDts:!0,onEmitDts(e){writeDts(path$6.resolve(t.dtsOutputPath||"./macros.d.ts"),e)}}))}function clearChars(){Object.keys(CHAR_COUNT).map((t=>0===CHAR_COUNT[t]))}function print(t){t&&"object"==typeof t&&"type"in t?console.log(JSON.stringify(t,void 0,2)):"string"==typeof t?""!==t&&console.log(JSON.stringify(t)):console.log(t)}function initialize(t){emitTypes(),0===matchPattern(["**/macros.config.{js,cjs,mjs,ts}"]).length&&require$$0$1.writeFileSync("./macros.config."+t,'import { defineConfig } from "@macro-plugin/core";\n\nexport default defineConfig({\n\n})\n')}function evaluate(code,options={}){return eval(core$1.transform(code,Object.assign(Object.assign({},getConfig()),{minify:options.minify})).code)}function buildFiles(t,e){extractFiles(t).map((t=>nodeval(t,e)))}function watchFiles(t,e){const{files:n,patts:i}=extractInput(t),s=i.map((t=>picomatch(t)));console.log("Start watching..."),watchExports("./",{recursive:!0,filter(t){if(n.includes(path$6.resolve(t)))return!0;for(const e of s)if(e(t))return!0;return!1}},((t,n)=>{"update"===t&&nodeval(n,e)}))}function nodeval(t,e={}){const n=e.output||t.replace(/\.\w+$/,".output.js");if(!e.run){const e=require$$0$1.readFileSync(t).toString();return void require$$0$1.writeFile(n,t.endsWith(".js")?transformJS(e):transformTS(e,t),(e=>{null!==e&&console.log(`${t} → ${n}`)}))}const i=require$$1.spawn("node",["-r","@macro-plugin/core/register",t],{env:Object.assign({},process.env)});i.stdout.on("data",(t=>{process$2.stdin.write(t)})),i.stderr.on("data",(t=>{process$2.stderr.write(t)}))}async function shell(t,e=[]){const n=readline.createInterface({input:process.stdin,output:process.stdout,terminal:!0,prompt:">>> ",history:e}),i=[];let s=[];n.prompt(),n.on("line",(e=>{if(isExprEnd(e)){try{const n=[...s,e].join("\n"),r=[...i,...s,e].join("\n");if(t.ast)print(core$1.parse(n,{syntax:"typescript",tsx:!0}).body[0]);else if(t.transform)console.log("`"+JSON.stringify(t.swc?transformTS(n,"<repl>.tsx"):transformJS(n)).replace(/\\"/g,'"').slice(1,-1)+"`");else{const e=evaluate(r,t);/\s*(let|const|var|function|async|class|import|export|enum|while|for|throw|interface|if|switch|private|try)\s+/.test(n)||print(e)}i.push(n)}catch(t){console.error(t)}clearChars(),s=[],n.setPrompt(">>> ")}else n.setPrompt("... "),s.push(e);n.prompt()})),n.on("close",(()=>{require$$0$1.existsSync(CACHE_FILE)&&require$$0$1.rmSync(CACHE_FILE)}))}program.name("macros").description("Macro Plugin Command Line Interface.").version(pkg.version).passThroughOptions().argument("[files...]","input (.js | .ts | .jsx | .tsx) files or glob patterns",[]).option("--init [template]","initialize macros environment").option("-c, --config <file>","use specified config file").option("-e, --eval <script>","evaluate script").option("-i, --interactive","run an interactive Macros shell").option("-m, --minify","enable/disable minification").option("-o, --output","output file name or directory").option("-p, --print","print generated code").action(((t,e)=>{if(e.init)return initialize("boolean"==typeof e.init?"js":e.init);if(t.length>0)return t.map((t=>nodeval(t,e)));if(e.eval)try{print(evaluate(e.eval,e))}catch(t){console.error(t)}else shell(e)})),program.command("init").description("Initialize Macros environment.").option("-t, --template <template>","initialize with template, the value could be (ts, js)","js").action((t=>{var e;return initialize(null!==(e=t.template)&&void 0!==e?e:"js")})),program.command("emit").description("Emit declaration file `macros.d.ts`.").action(emitTypes),program.command("dev").description("Transforming codes in watch mode.").argument("[files...]","input (.js | .ts | .jsx | .tsx) files or glob patterns",[]).option("-r, --run","use node run the files").option("-m, --minify","enable/disable minification").option("-o, --output","output file name or directory").action(((t,e)=>watchFiles(t,e))),program.command("run").description("Transform and run the entry files.").argument("[files...]","input (.js | .ts | .jsx | .tsx) files or glob patterns",[]).option("-m, --minify","enable/disable minification").action(((t,e)=>buildFiles(t,Object.assign(Object.assign({},e),{run:!0})))),program.command("build").description("Transforming codes in production mode.").argument("[files...]","input (.js | .ts | .jsx | .tsx) files or glob patterns",[]).option("-m, --minify","enable/disable minification").option("-r, --run","use node run the files").option("-o, --output <file>","output file name or directory").option("-w, --watch","rebuilds when modules have changed on disk").action(((t,e)=>{if(e.watch)return watchFiles(t,e);buildFiles(t,e)})),program.command("shell").description("Run an interactive Macros shell.").option("-a, --ast","interactive develop ast").option("-t, --transform","interactive show transformed code").option("-m, --minify","enable/disable minification").option("-s, --swc","enable swc(typescript|jsx) transform").action((t=>shell(t))),program.addHelpCommand("help [command]","Display help for command."),program.parse();
