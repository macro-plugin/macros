var t=require("@macro-plugin/core"),e=require("@swc/core"),o=require("fs"),n=require("module"),s=require("path"),u=require("process");const r=new Map([["12","es2018"],["13","es2019"],["14","es2020"],["15","es2021"],["16","es2021"],["17","es2022"]]);function a(t,e,o){let n=t;const s=e.split("."),u=s.pop();for(const t of s)null==n[t]&&(n[t]={}),n=n[t];n[u]=o}const i=["test","exclude","env","jsc","module","minify","sourceMaps","inlineSourcesContent","script","cwd","caller","filename","root","rootMode","envName","configFile","swcrc","swcrcRoots","inputSourceMap","sourceFileName","sourceRoot","plugin","isModule","outputPath"],c=process.cwd(),p=(t,e=c)=>n.createRequire(s.resolve(e,"noop.js"))(t);function l(t){var e;const o=function(t){const e={};for(const[o,n]of Object.entries(t))i.includes(o)&&(e[o]=n);return e}(t);return(null===(e=o.jsc)||void 0===e?void 0:e.target)||a(o,"jsc.target",r.get(process.version.match(/v(\d+)/)[1])||"es2018"),a(o,"jsc.transform.hidden.jest",!0),o.sourceMaps||a(o,"sourceMaps","inline"),o}function f(e){return e.emitDts&&!e.onEmitDts&&(e.onEmitDts=t=>function(t,e){const n=()=>o.writeFile(t,e,(()=>{}));o.existsSync(t)?o.readFile(t,((t,o)=>{(null==t&&e!==o.toString()||t)&&n()})):n()}(s.resolve(e.dtsOutputPath||"./macros.d.ts"),t)),e.depends&&(e.macros||(e.macros=[]),e.macros.push(...function(e){const o=[];for(const n of e)for(const e of Object.values(p(n)))t.isMacroPlugin(e)&&o.push(e);return o}(e.depends))),Array.isArray(e.externals)&&(e.externals=function(e){const o={};for(const n of e){o[n]={};for(const[e,s]of Object.entries(p(n)))t.isMacroPlugin(s)&&(o[n][e]=s)}return o}(e.externals)),e}var A={};function _(t){const o=A.addHook((t=>function(t,o=!1){return e.transformSync(t,{module:{type:o?"es6":"commonjs"},jsc:{parser:{syntax:"typescript"},target:"esnext"},swcrc:!1,configFile:!1}).code}(t,function(){try{return require("fs"),!1}catch(t){}return!0}())),{extensions:[".js",".ts"]}),n=require(t);return o(),n}function R(t){const[e,n]=function(){const t=u.cwd(),e=s.join(t,"macros.config.js");if(o.existsSync(e))return[e,require(e)];const n=s.join(t,"macros.config.ts");if(o.existsSync(n)){const t=_(n);return[n,(null==t?void 0:t.default)||{}]}return[void 0,{}]}(),r=Object.assign(Object.assign({},t||{}),n);return[l(r),f(r),e]}!function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.addHook=function(t,e={}){let o=!1;const n=[],s=[];let r;const p=i._extensions[".js"],l=e.matcher||null,f=!1!==e.ignoreNodeModules;r=e.extensions||e.exts||e.extension||e.ext||[".js"],Array.isArray(r)||(r=[r]);return r.forEach((e=>{if("string"!=typeof e)throw new TypeError(`Invalid Extension: ${e}`);const A=i._extensions[e]||p;s[e]=i._extensions[e],n[e]=i._extensions[e]=function(e,n){let s;o||function(t,e,o,n){if("string"!=typeof t)return!1;if(-1===e.indexOf(u.default.extname(t)))return!1;const s=u.default.resolve(t);if(n&&a.test(s))return!1;if(o&&"function"==typeof o)return!!o(s);return!0}(n,r,l,f)&&(s=e._compile,e._compile=function(o){e._compile=s;const u=t(o,n);if("string"!=typeof u)throw new Error(c);return e._compile(u,n)}),A(e,n)}})),function(){o||(o=!0,r.forEach((t=>{i._extensions[t]===n[t]&&(s[t]?i._extensions[t]=s[t]:delete i._extensions[t])})))}};var o=r(n),u=r(s);function r(t){return t&&t.__esModule?t:{default:t}}const a=/^(?:.*[\\/])?node_modules(?:[\\/].*)?$/,i=t.constructor.length>1?t.constructor:o.default,c="[Pirates] A hook returned a non-string, or nothing at all! This is a violation of intergalactic law!\n--------------------\nIf you have no idea what this means or what Pirates is, let me explain: Pirates is a module that makes is easy to implement require hooks. One of the require hooks you're using uses it. One of these require hooks didn't return anything from it's handler, so we don't know what to do. You might want to debug this."}({get exports(){return A},set exports(t){A=t}},A);var h={},g={get exports(){return h},set exports(t){h=t}},E={};const x=s,y="\\\\/",d=`[^${y}]`,b="\\.",S="\\/",$="[^/]",C=`(?:${S}|$)`,v=`(?:^|${S})`,H=`${b}{1,2}${C}`,m={DOT_LITERAL:b,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:S,ONE_CHAR:"(?=.)",QMARK:$,END_ANCHOR:C,DOTS_SLASH:H,NO_DOT:`(?!${b})`,NO_DOTS:`(?!${v}${H})`,NO_DOT_SLASH:`(?!${b}{0,1}${C})`,NO_DOTS_SLASH:`(?!${H})`,QMARK_NO_DOT:`[^.${S}]`,STAR:`${$}*?`,START_ANCHOR:v},O={...m,SLASH_LITERAL:`[${y}]`,QMARK:d,STAR:`${d}*?`,DOTS_SLASH:`${b}{1,2}(?:[${y}]|$)`,NO_DOT:`(?!${b})`,NO_DOTS:`(?!(?:^|[${y}])${b}{1,2}(?:[${y}]|$))`,NO_DOT_SLASH:`(?!${b}{0,1}(?:[${y}]|$))`,NO_DOTS_SLASH:`(?!${b}{1,2}(?:[${y}]|$))`,QMARK_NO_DOT:`[^.${y}]`,START_ANCHOR:`(?:^|[${y}])`,END_ANCHOR:`(?:[${y}]|$)`};var T={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:x.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?O:m};!function(t){const e=s,o="win32"===process.platform,{REGEX_BACKSLASH:n,REGEX_REMOVE_BACKSLASH:u,REGEX_SPECIAL_CHARS:r,REGEX_SPECIAL_CHARS_GLOBAL:a}=T;t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),t.hasRegexChars=t=>r.test(t),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=t=>t.replace(a,"\\$1"),t.toPosixSlashes=t=>t.replace(n,"/"),t.removeBackslashes=t=>t.replace(u,(t=>"\\"===t?"":t)),t.supportsLookbehinds=()=>{const t=process.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===o||"\\"===e.sep,t.escapeLast=(e,o,n)=>{const s=e.lastIndexOf(o,n);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,o,s-1):`${e.slice(0,s)}\\${e.slice(s)}`},t.removePrefix=(t,e={})=>{let o=t;return o.startsWith("./")&&(o=o.slice(2),e.prefix="./"),o},t.wrapOutput=(t,e={},o={})=>{let n=`${o.contains?"":"^"}(?:${t})${o.contains?"":"$"}`;return!0===e.negated&&(n=`(?:^(?!${n}).*$)`),n}}(E);const L=E,{CHAR_ASTERISK:k,CHAR_AT:w,CHAR_BACKWARD_SLASH:N,CHAR_COMMA:I,CHAR_DOT:M,CHAR_EXCLAMATION_MARK:P,CHAR_FORWARD_SLASH:B,CHAR_LEFT_CURLY_BRACE:D,CHAR_LEFT_PARENTHESES:G,CHAR_LEFT_SQUARE_BRACKET:j,CHAR_PLUS:K,CHAR_QUESTION_MARK:U,CHAR_RIGHT_CURLY_BRACE:F,CHAR_RIGHT_PARENTHESES:q,CHAR_RIGHT_SQUARE_BRACKET:X}=T,Q=t=>t===B||t===N,W=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)};var Z=(t,e)=>{const o=e||{},n=t.length-1,s=!0===o.parts||!0===o.scanToEnd,u=[],r=[],a=[];let i,c,p=t,l=-1,f=0,A=0,_=!1,R=!1,h=!1,g=!1,E=!1,x=!1,y=!1,d=!1,b=!1,S=!1,$=0,C={value:"",depth:0,isGlob:!1};const v=()=>l>=n,H=()=>(i=c,p.charCodeAt(++l));for(;l<n;){let t;if(c=H(),c!==N){if(!0===x||c===D){for($++;!0!==v()&&(c=H());)if(c!==N)if(c!==D){if(!0!==x&&c===M&&(c=H())===M){if(_=C.isBrace=!0,h=C.isGlob=!0,S=!0,!0===s)continue;break}if(!0!==x&&c===I){if(_=C.isBrace=!0,h=C.isGlob=!0,S=!0,!0===s)continue;break}if(c===F&&($--,0===$)){x=!1,_=C.isBrace=!0,S=!0;break}}else $++;else y=C.backslashes=!0,H();if(!0===s)continue;break}if(c!==B){if(!0!==o.noext){if(!0===(c===K||c===w||c===k||c===U||c===P)&&p.charCodeAt(l+1)===G){if(h=C.isGlob=!0,g=C.isExtglob=!0,S=!0,c===P&&l===f&&(b=!0),!0===s){for(;!0!==v()&&(c=H());)if(c!==N){if(c===q){h=C.isGlob=!0,S=!0;break}}else y=C.backslashes=!0,c=H();continue}break}}if(c===k){if(i===k&&(E=C.isGlobstar=!0),h=C.isGlob=!0,S=!0,!0===s)continue;break}if(c===U){if(h=C.isGlob=!0,S=!0,!0===s)continue;break}if(c===j){for(;!0!==v()&&(t=H());)if(t!==N){if(t===X){R=C.isBracket=!0,h=C.isGlob=!0,S=!0;break}}else y=C.backslashes=!0,H();if(!0===s)continue;break}if(!0===o.nonegate||c!==P||l!==f){if(!0!==o.noparen&&c===G){if(h=C.isGlob=!0,!0===s){for(;!0!==v()&&(c=H());)if(c!==G){if(c===q){S=!0;break}}else y=C.backslashes=!0,c=H();continue}break}if(!0===h){if(S=!0,!0===s)continue;break}}else d=C.negated=!0,f++}else{if(u.push(l),r.push(C),C={value:"",depth:0,isGlob:!1},!0===S)continue;if(i===M&&l===f+1){f+=2;continue}A=l+1}}else y=C.backslashes=!0,c=H(),c===D&&(x=!0)}!0===o.noext&&(g=!1,h=!1);let m=p,O="",T="";f>0&&(O=p.slice(0,f),p=p.slice(f),A-=f),m&&!0===h&&A>0?(m=p.slice(0,A),T=p.slice(A)):!0===h?(m="",T=p):m=p,m&&""!==m&&"/"!==m&&m!==p&&Q(m.charCodeAt(m.length-1))&&(m=m.slice(0,-1)),!0===o.unescape&&(T&&(T=L.removeBackslashes(T)),m&&!0===y&&(m=L.removeBackslashes(m)));const Z={prefix:O,input:t,start:f,base:m,glob:T,isBrace:_,isBracket:R,isGlob:h,isExtglob:g,isGlobstar:E,negated:d,negatedExtglob:b};if(!0===o.tokens&&(Z.maxDepth=0,Q(c)||r.push(C),Z.tokens=r),!0===o.parts||!0===o.tokens){let e;for(let n=0;n<u.length;n++){const s=u[n],i=t.slice(e?e+1:f,s);o.tokens&&(0===n&&0!==f?(r[n].isPrefix=!0,r[n].value=O):r[n].value=i,W(r[n]),Z.maxDepth+=r[n].depth),0===n&&""===i||a.push(i),e=s}if(e&&e+1<t.length){const n=t.slice(e+1);a.push(n),o.tokens&&(r[r.length-1].value=n,W(r[r.length-1]),Z.maxDepth+=r[r.length-1].depth)}Z.slashes=u,Z.parts=a}return Z};const Y=T,z=E,{MAX_LENGTH:V,POSIX_REGEX_SOURCE:J,REGEX_NON_SPECIAL_CHARS:tt,REGEX_SPECIAL_CHARS_BACKREF:et,REPLACEMENTS:ot}=Y,nt=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const o=`[${t.join("-")}]`;try{new RegExp(o)}catch(e){return t.map((t=>z.escapeRegex(t))).join("..")}return o},st=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,ut=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=ot[t]||t;const o={...e},n="number"==typeof o.maxLength?Math.min(V,o.maxLength):V;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const u={type:"bos",value:"",output:o.prepend||""},r=[u],a=o.capture?"":"?:",i=z.isWindows(e),c=Y.globChars(i),p=Y.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:f,SLASH_LITERAL:A,ONE_CHAR:_,DOTS_SLASH:R,NO_DOT:h,NO_DOT_SLASH:g,NO_DOTS_SLASH:E,QMARK:x,QMARK_NO_DOT:y,STAR:d,START_ANCHOR:b}=c,S=t=>`(${a}(?:(?!${b}${t.dot?R:l}).)*?)`,$=o.dot?"":h,C=o.dot?x:y;let v=!0===o.bash?S(o):d;o.capture&&(v=`(${v})`),"boolean"==typeof o.noext&&(o.noextglob=o.noext);const H={input:t,index:-1,start:0,dot:!0===o.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:r};t=z.removePrefix(t,H),s=t.length;const m=[],O=[],T=[];let L,k=u;const w=()=>H.index===s-1,N=H.peek=(e=1)=>t[H.index+e],I=H.advance=()=>t[++H.index]||"",M=()=>t.slice(H.index+1),P=(t="",e=0)=>{H.consumed+=t,H.index+=e},B=t=>{H.output+=null!=t.output?t.output:t.value,P(t.value)},D=()=>{let t=1;for(;"!"===N()&&("("!==N(2)||"?"===N(3));)I(),H.start++,t++;return t%2!=0&&(H.negated=!0,H.start++,!0)},G=t=>{H[t]++,T.push(t)},j=t=>{H[t]--,T.pop()},K=t=>{if("globstar"===k.type){"slash"===t.type||"paren"===t.type||H.braces>0&&("comma"===t.type||"brace"===t.type)||(!0===t.extglob||m.length&&("pipe"===t.type||"paren"===t.type))||(H.output=H.output.slice(0,-k.output.length),k.type="star",k.value="*",k.output=v,H.output+=k.output)}if(m.length&&"paren"!==t.type&&(m[m.length-1].inner+=t.value),(t.value||t.output)&&B(t),k&&"text"===k.type&&"text"===t.type)return k.value+=t.value,void(k.output=(k.output||"")+t.value);t.prev=k,r.push(t),k=t},U=(t,e)=>{const n={...p[e],conditions:1,inner:""};n.prev=k,n.parens=H.parens,n.output=H.output;const s=(o.capture?"(":"")+n.open;G("parens"),K({type:t,value:e,output:H.output?"":_}),K({type:"paren",extglob:!0,value:I(),output:s}),m.push(n)},F=t=>{let n,s=t.close+(o.capture?")":"");if("negate"===t.type){let u=v;if(t.inner&&t.inner.length>1&&t.inner.includes("/")&&(u=S(o)),(u!==v||w()||/^\)+$/.test(M()))&&(s=t.close=`)$))${u}`),t.inner.includes("*")&&(n=M())&&/^\.[^\\/.]+$/.test(n)){const o=ut(n,{...e,fastpaths:!1}).output;s=t.close=`)${o})${u})`}"bos"===t.prev.type&&(H.negatedExtglob=!0)}K({type:"paren",extglob:!0,value:L,output:s}),j("parens")};if(!1!==o.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let n=!1,s=t.replace(et,((t,e,o,s,u,r)=>"\\"===s?(n=!0,t):"?"===s?e?e+s+(u?x.repeat(u.length):""):0===r?C+(u?x.repeat(u.length):""):x.repeat(o.length):"."===s?l.repeat(o.length):"*"===s?e?e+s+(u?v:""):v:e?t:`\\${t}`));return!0===n&&(s=!0===o.unescape?s.replace(/\\/g,""):s.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),s===t&&!0===o.contains?(H.output=t,H):(H.output=z.wrapOutput(s,H,e),H)}for(;!w();){if(L=I(),"\0"===L)continue;if("\\"===L){const t=N();if("/"===t&&!0!==o.bash)continue;if("."===t||";"===t)continue;if(!t){L+="\\",K({type:"text",value:L});continue}const e=/^\\+/.exec(M());let n=0;if(e&&e[0].length>2&&(n=e[0].length,H.index+=n,n%2!=0&&(L+="\\")),!0===o.unescape?L=I():L+=I(),0===H.brackets){K({type:"text",value:L});continue}}if(H.brackets>0&&("]"!==L||"["===k.value||"[^"===k.value)){if(!1!==o.posix&&":"===L){const t=k.value.slice(1);if(t.includes("[")&&(k.posix=!0,t.includes(":"))){const t=k.value.lastIndexOf("["),e=k.value.slice(0,t),o=k.value.slice(t+2),n=J[o];if(n){k.value=e+n,H.backtrack=!0,I(),u.output||1!==r.indexOf(k)||(u.output=_);continue}}}("["===L&&":"!==N()||"-"===L&&"]"===N())&&(L=`\\${L}`),"]"!==L||"["!==k.value&&"[^"!==k.value||(L=`\\${L}`),!0===o.posix&&"!"===L&&"["===k.value&&(L="^"),k.value+=L,B({value:L});continue}if(1===H.quotes&&'"'!==L){L=z.escapeRegex(L),k.value+=L,B({value:L});continue}if('"'===L){H.quotes=1===H.quotes?0:1,!0===o.keepQuotes&&K({type:"text",value:L});continue}if("("===L){G("parens"),K({type:"paren",value:L});continue}if(")"===L){if(0===H.parens&&!0===o.strictBrackets)throw new SyntaxError(st("opening","("));const t=m[m.length-1];if(t&&H.parens===t.parens+1){F(m.pop());continue}K({type:"paren",value:L,output:H.parens?")":"\\)"}),j("parens");continue}if("["===L){if(!0!==o.nobracket&&M().includes("]"))G("brackets");else{if(!0!==o.nobracket&&!0===o.strictBrackets)throw new SyntaxError(st("closing","]"));L=`\\${L}`}K({type:"bracket",value:L});continue}if("]"===L){if(!0===o.nobracket||k&&"bracket"===k.type&&1===k.value.length){K({type:"text",value:L,output:`\\${L}`});continue}if(0===H.brackets){if(!0===o.strictBrackets)throw new SyntaxError(st("opening","["));K({type:"text",value:L,output:`\\${L}`});continue}j("brackets");const t=k.value.slice(1);if(!0===k.posix||"^"!==t[0]||t.includes("/")||(L=`/${L}`),k.value+=L,B({value:L}),!1===o.literalBrackets||z.hasRegexChars(t))continue;const e=z.escapeRegex(k.value);if(H.output=H.output.slice(0,-k.value.length),!0===o.literalBrackets){H.output+=e,k.value=e;continue}k.value=`(${a}${e}|${k.value})`,H.output+=k.value;continue}if("{"===L&&!0!==o.nobrace){G("braces");const t={type:"brace",value:L,output:"(",outputIndex:H.output.length,tokensIndex:H.tokens.length};O.push(t),K(t);continue}if("}"===L){const t=O[O.length-1];if(!0===o.nobrace||!t){K({type:"text",value:L,output:L});continue}let e=")";if(!0===t.dots){const t=r.slice(),n=[];for(let e=t.length-1;e>=0&&(r.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&n.unshift(t[e].value);e=nt(n,o),H.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const o=H.output.slice(0,t.outputIndex),n=H.tokens.slice(t.tokensIndex);t.value=t.output="\\{",L=e="\\}",H.output=o;for(const t of n)H.output+=t.output||t.value}K({type:"brace",value:L,output:e}),j("braces"),O.pop();continue}if("|"===L){m.length>0&&m[m.length-1].conditions++,K({type:"text",value:L});continue}if(","===L){let t=L;const e=O[O.length-1];e&&"braces"===T[T.length-1]&&(e.comma=!0,t="|"),K({type:"comma",value:L,output:t});continue}if("/"===L){if("dot"===k.type&&H.index===H.start+1){H.start=H.index+1,H.consumed="",H.output="",r.pop(),k=u;continue}K({type:"slash",value:L,output:A});continue}if("."===L){if(H.braces>0&&"dot"===k.type){"."===k.value&&(k.output=l);const t=O[O.length-1];k.type="dots",k.output+=L,k.value+=L,t.dots=!0;continue}if(H.braces+H.parens===0&&"bos"!==k.type&&"slash"!==k.type){K({type:"text",value:L,output:l});continue}K({type:"dot",value:L,output:l});continue}if("?"===L){if(!(k&&"("===k.value)&&!0!==o.noextglob&&"("===N()&&"?"!==N(2)){U("qmark",L);continue}if(k&&"paren"===k.type){const t=N();let e=L;if("<"===t&&!z.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===k.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(M()))&&(e=`\\${L}`),K({type:"text",value:L,output:e});continue}if(!0!==o.dot&&("slash"===k.type||"bos"===k.type)){K({type:"qmark",value:L,output:y});continue}K({type:"qmark",value:L,output:x});continue}if("!"===L){if(!0!==o.noextglob&&"("===N()&&("?"!==N(2)||!/[!=<:]/.test(N(3)))){U("negate",L);continue}if(!0!==o.nonegate&&0===H.index){D();continue}}if("+"===L){if(!0!==o.noextglob&&"("===N()&&"?"!==N(2)){U("plus",L);continue}if(k&&"("===k.value||!1===o.regex){K({type:"plus",value:L,output:f});continue}if(k&&("bracket"===k.type||"paren"===k.type||"brace"===k.type)||H.parens>0){K({type:"plus",value:L});continue}K({type:"plus",value:f});continue}if("@"===L){if(!0!==o.noextglob&&"("===N()&&"?"!==N(2)){K({type:"at",extglob:!0,value:L,output:""});continue}K({type:"text",value:L});continue}if("*"!==L){"$"!==L&&"^"!==L||(L=`\\${L}`);const t=tt.exec(M());t&&(L+=t[0],H.index+=t[0].length),K({type:"text",value:L});continue}if(k&&("globstar"===k.type||!0===k.star)){k.type="star",k.star=!0,k.value+=L,k.output=v,H.backtrack=!0,H.globstar=!0,P(L);continue}let e=M();if(!0!==o.noextglob&&/^\([^?]/.test(e)){U("star",L);continue}if("star"===k.type){if(!0===o.noglobstar){P(L);continue}const n=k.prev,s=n.prev,u="slash"===n.type||"bos"===n.type,r=s&&("star"===s.type||"globstar"===s.type);if(!0===o.bash&&(!u||e[0]&&"/"!==e[0])){K({type:"star",value:L,output:""});continue}if(!u&&"paren"!==n.type&&!(H.braces>0&&("comma"===n.type||"brace"===n.type))&&!(m.length&&("pipe"===n.type||"paren"===n.type))){K({type:"star",value:L,output:""});continue}for(;"/**"===e.slice(0,3);){const o=t[H.index+4];if(o&&"/"!==o)break;e=e.slice(3),P("/**",3)}if("bos"===n.type&&w()){k.type="globstar",k.value+=L,k.output=S(o),H.output=k.output,H.globstar=!0,P(L);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!r&&w()){H.output=H.output.slice(0,-(n.output+k.output).length),n.output=`(?:${n.output}`,k.type="globstar",k.output=S(o)+(o.strictSlashes?")":"|$)"),k.value+=L,H.globstar=!0,H.output+=n.output+k.output,P(L);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";H.output=H.output.slice(0,-(n.output+k.output).length),n.output=`(?:${n.output}`,k.type="globstar",k.output=`${S(o)}${A}|${A}${t})`,k.value+=L,H.output+=n.output+k.output,H.globstar=!0,P(L+I()),K({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===e[0]){k.type="globstar",k.value+=L,k.output=`(?:^|${A}|${S(o)}${A})`,H.output=k.output,H.globstar=!0,P(L+I()),K({type:"slash",value:"/",output:""});continue}H.output=H.output.slice(0,-k.output.length),k.type="globstar",k.output=S(o),k.value+=L,H.output+=k.output,H.globstar=!0,P(L);continue}const n={type:"star",value:L,output:v};!0!==o.bash?!k||"bracket"!==k.type&&"paren"!==k.type||!0!==o.regex?(H.index!==H.start&&"slash"!==k.type&&"dot"!==k.type||("dot"===k.type?(H.output+=g,k.output+=g):!0===o.dot?(H.output+=E,k.output+=E):(H.output+=$,k.output+=$),"*"!==N()&&(H.output+=_,k.output+=_)),K(n)):(n.output=L,K(n)):(n.output=".*?","bos"!==k.type&&"slash"!==k.type||(n.output=$+n.output),K(n))}for(;H.brackets>0;){if(!0===o.strictBrackets)throw new SyntaxError(st("closing","]"));H.output=z.escapeLast(H.output,"["),j("brackets")}for(;H.parens>0;){if(!0===o.strictBrackets)throw new SyntaxError(st("closing",")"));H.output=z.escapeLast(H.output,"("),j("parens")}for(;H.braces>0;){if(!0===o.strictBrackets)throw new SyntaxError(st("closing","}"));H.output=z.escapeLast(H.output,"{"),j("braces")}if(!0===o.strictSlashes||"star"!==k.type&&"bracket"!==k.type||K({type:"maybe_slash",value:"",output:`${A}?`}),!0===H.backtrack){H.output="";for(const t of H.tokens)H.output+=null!=t.output?t.output:t.value,t.suffix&&(H.output+=t.suffix)}return H};ut.fastpaths=(t,e)=>{const o={...e},n="number"==typeof o.maxLength?Math.min(V,o.maxLength):V,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=ot[t]||t;const u=z.isWindows(e),{DOT_LITERAL:r,SLASH_LITERAL:a,ONE_CHAR:i,DOTS_SLASH:c,NO_DOT:p,NO_DOTS:l,NO_DOTS_SLASH:f,STAR:A,START_ANCHOR:_}=Y.globChars(u),R=o.dot?l:p,h=o.dot?f:p,g=o.capture?"":"?:";let E=!0===o.bash?".*?":A;o.capture&&(E=`(${E})`);const x=t=>!0===t.noglobstar?E:`(${g}(?:(?!${_}${t.dot?c:r}).)*?)`,y=t=>{switch(t){case"*":return`${R}${i}${E}`;case".*":return`${r}${i}${E}`;case"*.*":return`${R}${E}${r}${i}${E}`;case"*/*":return`${R}${E}${a}${i}${h}${E}`;case"**":return R+x(o);case"**/*":return`(?:${R}${x(o)}${a})?${h}${i}${E}`;case"**/*.*":return`(?:${R}${x(o)}${a})?${h}${E}${r}${i}${E}`;case"**/.*":return`(?:${R}${x(o)}${a})?${r}${i}${E}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const o=y(e[1]);if(!o)return;return o+r+e[2]}}},d=z.removePrefix(t,{negated:!1,prefix:""});let b=y(d);return b&&!0!==o.strictSlashes&&(b+=`${a}?`),b};const rt=s,at=Z,it=ut,ct=E,pt=T,lt=(t,e,o=!1)=>{if(Array.isArray(t)){const n=t.map((t=>lt(t,e,o))),s=t=>{for(const e of n){const o=e(t);if(o)return o}return!1};return s}const n=(s=t)&&"object"==typeof s&&!Array.isArray(s)&&t.tokens&&t.input;var s;if(""===t||"string"!=typeof t&&!n)throw new TypeError("Expected pattern to be a non-empty string");const u=e||{},r=ct.isWindows(e),a=n?lt.compileRe(t,e):lt.makeRe(t,e,!1,!0),i=a.state;delete a.state;let c=()=>!1;if(u.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};c=lt(u.ignore,t,o)}const p=(o,n=!1)=>{const{isMatch:s,match:p,output:l}=lt.test(o,a,e,{glob:t,posix:r}),f={glob:t,state:i,regex:a,posix:r,input:o,output:l,match:p,isMatch:s};return"function"==typeof u.onResult&&u.onResult(f),!1===s?(f.isMatch=!1,!!n&&f):c(o)?("function"==typeof u.onIgnore&&u.onIgnore(f),f.isMatch=!1,!!n&&f):("function"==typeof u.onMatch&&u.onMatch(f),!n||f)};return o&&(p.state=i),p};var ft;function At(){return ft||(ft=R({})),ft}lt.test=(t,e,o,{glob:n,posix:s}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const u=o||{},r=u.format||(s?ct.toPosixSlashes:null);let a=t===n,i=a&&r?r(t):t;return!1===a&&(i=r?r(t):t,a=i===n),!1!==a&&!0!==u.capture||(a=!0===u.matchBase||!0===u.basename?lt.matchBase(t,e,o,s):e.exec(i)),{isMatch:Boolean(a),match:a,output:i}},lt.matchBase=(t,e,o,n=ct.isWindows(o))=>(e instanceof RegExp?e:lt.makeRe(e,o)).test(rt.basename(t)),lt.isMatch=(t,e,o)=>lt(e,o)(t),lt.parse=(t,e)=>Array.isArray(t)?t.map((t=>lt.parse(t,e))):it(t,{...e,fastpaths:!1}),lt.scan=(t,e)=>at(t,e),lt.compileRe=(t,e,o=!1,n=!1)=>{if(!0===o)return t.output;const s=e||{};let u=`${s.contains?"":"^"}(?:${t.output})${s.contains?"":"$"}`;t&&!0===t.negated&&(u=`^(?!${u}).*$`);const r=lt.toRegex(u,e);return!0===n&&(r.state=t),r},lt.makeRe=(t,e={},o=!1,n=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(s.output=it.fastpaths(t,e)),s.output||(s=it(t,e)),lt.compileRe(s,e,o,n)},lt.toRegex=(t,e)=>{try{const o=e||{};return new RegExp(t,o.flags||(o.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},lt.constants=pt,g.exports=lt,A.addHook((function(e){const o=At()[1];return t.transform(e,o).code}),{extensions:[".js"]}),A.addHook((function(o,n){const[s,u]=At(),r=t.createSwcPlugin(u,o,t.getSpanOffset()),a=Object.assign(Object.assign({},s),{module:Object.assign(Object.assign({},s.module),{type:"es6"}),plugin:r,filename:n}),i=/\.(js|ts)x$/.test(n),c=/\.tsx?$/.test(n)?{syntax:"typescript",tsx:i}:{syntax:"ecmascript",jsx:i};return a.jsc?a.jsc.parser=c:a.jsc={parser:c},e.transformSync(o,a).code}),{extensions:[".jsx",".tsx",".ts"]});
